import{e as p,a as f,l as L,z as T,Y as b,M as $,N as H,r as m,w as P,x as D,s as h,q as B,k as q,h as M,Z as x,v as N,y as S,j as O,$ as v,a0 as I}from"./index-C1Kn7LbF.js";import{h as g}from"./gRoutingHandlers-CSpceJ5l.js";function G(e){var s;let t=Date.now(),n=2,i=0;if(e instanceof HTMLInputElement){const r=w(e)??[0,100,null],[o,c,d]=r,u=((s=e.value)==null?void 0:s.replaceAll("-",""))??"",l=new XMLHttpRequest;l.open("GET",`https://brasilapi.com.br/api/cep/v2/${u}`),l.send(),l.onload=()=>{if(i=A(l,n),i===200)d&&o&&E(e,d,t,o,c);else{console.warn("Error on the first XML/HTTP request. Initializing second request."),n--,t=Date.now();const a=new XMLHttpRequest;a.open("GET",`https://brasilapi.com.br/api/cep/v1/${u}`),a.send(),a.onload=()=>{i=A(a,n),i===200||console.error("Error on the second XML/HTTP request. Aborting process."),d&&o&&E(e,d,t,o,c)}}}}else p(e,"argument for searchCEPXML",f(new Error));return i}function A(e=new XMLHttpRequest,t=1){try{if(e instanceof XMLHttpRequest&&typeof t=="number"){const n=JSON.parse(e.response);if(e.status===200&&n){const i=document.getElementById("UFId"),s=document.getElementById("cityId"),r=document.getElementById("neighbourhoodId"),o=document.getElementById("streetId");i instanceof HTMLInputElement&&(i.value=n.state),s instanceof HTMLInputElement&&(s.value=n.city),r instanceof HTMLInputElement&&(r.value=n.neighborhood),o instanceof HTMLInputElement&&(o.value=n.street)}else throw e.status.toString().match(/^2/)?new Error("Status not recognized."):new Error(`Invalid status: ${e.status}`)}else throw new Error(`Error on the values entry.
      Obtained values: ${JSON.stringify(e)||null}, ${t}`)}catch(n){console.warn(`Error status for CEPV${t}: `,n.message)}return e.status}async function U(e){var t;try{const n=Date.now();if(!(e instanceof HTMLInputElement))return p(e,"argument for searchCEPXML",f(new Error)),"fail";const i=w(e)??[0,100,null],[s,r,o]=i,c=((t=e.value)==null?void 0:t.replaceAll("-",""))??"";try{const d=await Promise.any([`https://brasilapi.com.br/api/cep/v2/${c}`,`https://brasilapi.com.br/api/cep/v1/${c}`].map(F));if(d.ok)return z(d),o&&s&&E(e,o,n,s,r),"success";console.error("Both requests failed. Aborting process."),o&&s&&E(e,o,n,s,r)}catch(d){console.error(`Error in both requests: ${d.message}`),document.getElementById("divCEPWarn")&&(document.getElementById("divCEPWarn").textContent=`*Erro carregando informações a partir de CEP. 
 Inclua manualmente`),o&&s&&E(e,o,n,s,r)}}catch{console.error("Error initializing searchCEP")}return"fail"}async function F(e){const t=await fetch(e);try{if(!t.ok)throw new Error(`Error in CEP request. Status: ${t.status}`)}catch(n){console.error(`Error in CEP request: ${n.message}`)}return t}async function z(e){try{if(e instanceof Response){const t=await e.json();if(e.ok&&t){const n=document.getElementById("UFId"),i=document.getElementById("cityId"),s=document.getElementById("neighbourhoodId"),r=document.getElementById("streetId");return n instanceof HTMLInputElement&&(n.value=t.state),i instanceof HTMLInputElement&&(i.value=t.city),s instanceof HTMLInputElement&&(s.value=t.neighborhood),r instanceof HTMLInputElement&&(r.value=t.street),t}else throw e.status.toString().match(/^2/)?new Error("Status not recognized."):new Error(`Invalid status: ${e.status}`)}else throw new Error(`Error on the values entry.
      Obtained values: ${JSON.stringify(e)||null}`)}catch(t){console.warn("Error status: ",t.message)}return-1}function w(e){var n;const t=document.createElement("progress");return e instanceof HTMLInputElement?((n=document.getElementById("divProgCEP"))==null||n.append(t),Object.assign(t,{id:"loadBarCepVars",max:100,value:0,style:{backgroundColor:"blue",color:"white"},width:e.width})):L(e,"cepElement",f(new Error)),[t.max,t.value,t]}function E(e,t=new HTMLProgressElement,n=0,i=100,s=0){if(e instanceof HTMLInputElement&&t instanceof HTMLProgressElement&&typeof n=="number"&&typeof i=="number"&&typeof s=="number"){const r=Date.now()-n,o=r.toString().length-1,c=Array.from({length:o},()=>"0").reduce((l,a)=>l+a,"1"),d=1*parseInt(c),u=Math.round(r/d)*d;if(s!==i){const l=setInterval(()=>{s+=5,t.value=s,s===i&&clearInterval(l)},u/20)}setTimeout(()=>{var l;(l=document.getElementById("divProgCEP"))==null||l.removeChild(t),document.getElementById("divProgCEP").style.minHeight="1rem",document.getElementById("divProgCEP").style.height="1rem"},u)}else T(f(new Error),"argumentos para uploadCEPLoadBar",e,t,n,i,s)}function V(e,t=0){let n=!0;return e instanceof HTMLButtonElement&&typeof t=="number"?t===9?(e.removeAttribute("disabled"),n=!1):e.setAttribute("disabled",""):T(f(new Error),"argumentos para enableCEPBtn",e,t),n}function W(e,t=1){var n,i,s;if((e==null?void 0:e.currentTarget)instanceof HTMLButtonElement&&typeof t=="number")if(e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.contains("addAntMed")){const r=Object.assign(document.createElement("div"),{className:"antMedBlock",id:`antMedBlock${t}`,innerHTML:`
              <span role="group" class="divAntMedSpan spanMain spanAntMedText" id="antMedSpanInp${t}">
                <label for="antMedId${t}" class="antMedLabel">${t}&#41
                  <input type="text" name="antMedName${t}" id="antMedId${t}" class="form-control autocorrect autocorrectFirst inpAntMed antMedText" data-title="desc_tratamento${t}" data-xls="Descrição de Tratamento ${t}" placeholder="Preencha aqui sobre o tratamento ${t}" />
                </label>
              </span>
              <span role="group" class="divAntMedSpan spanMain spanAntMedDate" id="antMedSpanMainDate${t}">
                <span role="group" class="divAntMedSubSpan spanSub spanSubAntMedDate" id="antMedSpanSubDate${t}">
                  <div role="group" class="antMedDiv">
                    <label for="antMedDateIniId${t}" class="antMedLabel"></label>
                    <div role="group" class="antMedDateDiv flexDiv">
                      <input type="date" name="antMedDateIniName${t}" id="antMedDateIniId${t}" class="form-control inpDate antMedDate inpAntMed" data-title="data_ini_tratamento${t}" data-xls="Início de Tratamento ${t}" required /> 
                      <span role="textbox">até</span>
                      <input type="date" name="antMedDateEndName${t}" id="antMedDateEndId${t}" class="form-control inpDate antMedDate inpAntMed" data-title="data_end_tratamento${t}" data-xls="Termino de Tratamento ${t}" required />
                      <label for="antMedDateEndId${t}" class="antMedLabel"></label>
                      <button type="button" class="datBtn atualTratBtn btn btn-secondary" id="atualTrat${t}DatBtn">
                        Usar data atual
                      </button>
                    </div>
                  </div>
                </span>
              </span>
          `,style:{width:"100%"}});(n=document.getElementById("antMedContainer"))==null||n.appendChild(r),r.querySelectorAll('button[id$="DatBtn"]').forEach(o=>{o.addEventListener("click",c=>b(c,o))}),r.querySelectorAll('input[type="text"]').forEach(o=>{o.addEventListener("input",()=>$(o,H(document.querySelector('button[id^="deactAutocorrectBtn"]')||document.querySelector('input[id^="deactAutocorrectBtn"]'))))})}else if(e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.contains("removeAntMed")){const r=Array.from(document.querySelectorAll(".antMedBlock")).at(-1);r&&t>0&&(r==null?void 0:r.id)!=="antMedBlock1"?r.remove():console.warn(`Erro localizando divToRemove:
        Elemento: ${JSON.stringify((r==null?void 0:r.tagName)||"no instance")};
        blockCount: ${t};
        divToRemove id: ${r==null?void 0:r.id}`)}else console.error(`Error validating .classList of click.target in addAntMedHandler.
        Catched value: ${((i=e==null?void 0:e.target)==null?void 0:i.classList)??"UNDEFINED CLASS LIST"}.`);else p(e==null?void 0:e.target,`${((s=e==null?void 0:e.target)==null?void 0:s.id)??"UNDEFINED BUTTON ID"}`,f(new Error));return t}function X(e){var t,n,i,s,r,o,c,d,u;try{if(!(e instanceof HTMLInputElement&&(e.type==="radio"||e.type==="checkbox")))throw p(e,"Validation of Event Current Target",f(new Error));const l=e.closest(".spanSectAnt")||e.closest(".input-group")||e.closest('span[role="group"]');if(!(l instanceof HTMLElement))throw p(l,"Validation of Parent Section Span",f(new Error));let a=l.nextElementSibling;if(a!=null&&a.classList.contains(".divAdd")||(a=(t=l.nextElementSibling)==null?void 0:t.nextElementSibling),a!=null&&a.classList.contains(".divAdd")||(a=(i=(n=l.nextElementSibling)==null?void 0:n.nextElementSibling)==null?void 0:i.nextElementSibling),a!=null&&a.classList.contains(".divAdd")||(a=(o=(r=(s=l.nextElementSibling)==null?void 0:s.nextElementSibling)==null?void 0:r.nextElementSibling)==null?void 0:o.nextElementSibling),a instanceof HTMLElement&&a.classList.contains("divAdd")||(a=document.getElementById(`divAdd${e.id.replace("ant","").replace("Id","")}`)),!(a instanceof HTMLElement&&a.classList.contains("divAdd")))throw p(a,"Validation of Div Add",f(new Error));if(e.checked){a.style.display="grid",a.style.opacity="0.8",a.style.minWidth="70vw";for(const y of[...a.querySelectorAll('input[type="radio"'),...a.querySelectorAll('input[type="number"]'),...a.querySelectorAll('input[type="date"]')])y instanceof HTMLInputElement&&(y.dataset.required="true")}else{a.style.display="none",a.style.opacity="0",a.style.minWidth="0";for(const y of[...a.querySelectorAll('input[type="radio"'),...a.querySelectorAll('input[type="number"]'),...a.querySelectorAll('input[type="date"]')])y instanceof HTMLInputElement&&delete y.dataset.required}}catch(l){console.error(`Error executing callback for ${e instanceof HTMLElement?e.id||e.className||e.tagName:"undefined target"}:
${l.message}
      Attempts for divAdd:
      1. ${e instanceof HTMLElement&&((c=e.closest(".spanSectAnt"))==null?void 0:c.id)||"null"}
      2. ${e instanceof HTMLElement&&((d=e.closest(".input-group"))==null?void 0:d.id)||"null"}
      3. ${e instanceof HTMLElement&&((u=e.closest('span[role="group"]'))==null?void 0:u.id)||"null"}
      4. ${e instanceof HTMLElement&&document.getElementById(`divAdd${e.id.replace("ant","").replace("Id","")}`)||"null"}`)}}function _({routeCase:e}){const[t,n]=m.useState(!1),[i,s]=m.useState(!1),[r,o]=m.useState(!1);return m.useEffect(()=>s(!0),[]),m.useEffect(()=>{if(!i)return;const c=()=>h(document.querySelectorAll("[class*='flexTwin']"),[["width","px"]]);return setTimeout(()=>{if(P(),addEventListener("resize",c),e!=="login"&&e!=="base"&&e!=="recover"&&(r||(D(),o(!0))),e==="ag")h(document.querySelectorAll("[class*='flexTwin']"),[["width","px"]]),B(Array.from(document.querySelectorAll('input[type="date"]'))),document.querySelectorAll(".cbFam").forEach(X);else if(e==="od"){const d=(u,l)=>{try{if(!(u instanceof HTMLInputElement))throw L(u,"Validation of Input instance",f(new Error));u.value="Hígido"}catch(a){console.error(`Error executing iteration ${l} for defaulting values to inpAvDents:
${a.message}`)}};document.querySelectorAll(".inpAvDent").forEach((u,l)=>d(u,l)),q(Array.from(document.querySelectorAll(".fsAnamGDiv")))}},500),e==="login"?g("login","Login Page Style"):e==="base"?g("base","Base Page Style"):e==="ag"?(g("ag","AG Page Style"),v.agIsAutoCorrectOn=M(v.agIsAutoCorrectOn,"num")):e==="od"?(g("od","Od Page Style"),I.odIsAutoCorrectOn=M(I.odIsAutoCorrectOn,"notNum")):e==="recover"&&g("recover","Recover Page Style"),n(!0),()=>{e==="ag"&&removeEventListener("resize",c)}},[i]),m.useEffect(()=>{x()},[t]),m.useEffect(()=>{if(!i)return;setTimeout(()=>N(document.querySelectorAll("*")),1e3),setTimeout(()=>{for(const d of document.querySelectorAll("form"))S(d)},1e3);const c=setInterval(()=>{for(const d of document.querySelectorAll("form"))S(d)},6e4);return()=>clearInterval(c)}),m.useEffect(()=>{setTimeout(()=>{for(const c of document.querySelectorAll(".divAdd.divAntFamCheck"))c instanceof HTMLElement&&(c.style.display="none")},1e3)},[]),O.jsx("div",{className:"watcher",id:`watcher-${e}`,style:{display:"none"}})}export{_ as W,W as a,G as b,V as e,X as h,U as s};
