import{r as m,v as L,j as e,i as z,E as q,e as g,a as h,f as A,G as H,u as re,a8 as De,as as K,at as f,S as ee,au as V,l as B,aw as J,m as Q,a1 as be,z as Xe,az as ve,b as $e,y as Fe,a3 as Ye,aA as Ze,M as we,V as er,W as Te,T as Me,ai as ue,aj as Re,x as rr,q as tr,aB as ar,s as nr,av as Se,X as or,an as lr,aC as me}from"./index-C1Kn7LbF.js";import{c as Be,a as sr,P as cr,b as ae,f as U,d as xe,e as ge,g as qe,s as ke,S as Ne,h as oe,i as He,j as fe,k as ir,l as dr,u as ur,p as Ce,m as mr,n as fr,o as _,q as ne,r as hr,t as he,v as pr,w as xr,x as Ie,y as gr,R as Er}from"./SelectPanel-CJdT8BOV.js";import{E as te}from"./ErrorFallbackDlg-BlD7iaAe.js";import{P as X}from"./panel-CSa-xXsp.js";import"./gRoutingHandlers-CSpceJ5l.js";import"./TipsBtn-xgur9iM4.js";import"./UserProfilePanel-Du1wpZ5d.js";function _e({setDisplayFailRegstDlg:r,shouldDisplayFailRegstDlg:a=!1,secondOp:t="Arraste"}){const l=m.useRef(null),n=()=>{r(!a),!a&&l.current instanceof HTMLDialogElement&&l.current.close()};return m.useEffect(()=>{a&&l.current instanceof HTMLDialogElement&&l.current.showModal(),L([...l.current.querySelectorAll("*"),l.current]);const o=c=>{c.key==="Escape"&&n()};return addEventListener("keydown",o),()=>removeEventListener("keydown",o)},[a,n,l]),e.jsx(e.Fragment,{children:a&&e.jsx("dialog",{role:"alertdialog",ref:l,className:"modal-content modal-content-fit wid80",id:"alert-dlg",onClick:o=>{z(o,o.currentTarget).some(c=>c===!0)&&(o.currentTarget.close(),r(!a))},children:e.jsx(q,{FallbackComponent:()=>e.jsx(te,{renderError:new Error("Erro carregando a janela modal!"),onClick:n}),children:e.jsxs("section",{role:"alert",className:"flexNoWC flexJtC flexAlItCt rGap2v",children:[e.jsx("div",{role:"group",className:"flexJtC flexAlItCt flexNoWC wsBs noInvert",children:e.jsxs("h3",{className:"wsBs",children:["Falha na procura de um encaixe correspondente na agenda! ",`${t} `," ou insira manualmente."]})}),e.jsx("button",{className:"btn btn-danger bolded",onClick:n,children:"Fechar"})]})})})})}function jr({rootEl:r,secondOp:a="Arraste"}){let t;const[l,n]=m.useState(!1),o=m.useContext(X).userClass,c=m.useRef(null),d=(p,v=!0)=>{p instanceof HTMLElement?t=A(p):p=document.getElementById("regstDaySubDiv"),p instanceof HTMLElement?t=A(p):g(p,"Root for placing failed register for new appointment",h(new Error)),Be(c.current,document,[t,v,n,a],o)||n(!v),t=void 0};return m.useEffect(()=>{c.current instanceof HTMLButtonElement?L([document.getElementById("regstDayBtn")]):g(c.current,"Button for Registering new appointment",h(new Error))},[c]),e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",id:"regstDayBtn",className:"btn btn-primary widMin82Q460v hovBlock",ref:c,onClick:()=>d(r,l),title:"Repasse a consulta na Área de Transferência para a agenda",children:"Agendar Consulta"}),l&&e.jsx(_e,{setDisplayFailRegstDlg:n,shouldDisplayFailRegstDlg:l,root:t,secondOp:a})]})}function Ae({nCol:r=NaN,last:a=!1}){const t=(()=>{switch(r){case 1:return"Primeiro";case 2:return"Segundo";case 3:return"Terceiro";case 4:return"Quarto";case 5:return"Quinto";case 6:return"Sexto";case 7:return"Sétimo";case 8:return"Oitavo";case 9:return"Nono";case 10:return"Décimo";default:return"Indefinido"}})();return e.jsxs("th",{className:a?"tabCel lastConsDayCont":"",scope:"col","data-row":"1","data-col":r,children:[e.jsx("label",{className:"consWeekday",htmlFor:"order_dayfInp",contentEditable:!0,"data-row":"1","data-col":r}),e.jsxs("div",{role:"group",className:"flexAlItCt",children:[e.jsx("input",{type:"date",className:"form-control dayTabRef lcPersist noInvert flScape90",id:"order_dayfInp",name:`date_h_1_${r}`,"data-title":`${t} dia do mês`,"data-row":"1","data-col":r}),e.jsx("span",{role:"textbox",className:"alertSpan flexBasis10 widMax10C widMin3C"})]})]})}function yr({setDisplayExcludeDlg:r,shouldDisplayExcludeDlg:a=!0,btn:t}){const l=m.useContext(X).userClass,n=m.useRef(null),o=m.useRef(null),c=()=>{r(!a),!a&&n.current instanceof HTMLDialogElement&&n.current.close()};return m.useEffect(()=>{const d=()=>{r(!a),!a&&n.current instanceof HTMLDialogElement&&n.current.close()};a&&n.current instanceof HTMLDialogElement&&n.current.showModal(),L([...n.current.querySelectorAll("*"),n.current]),n.current.addEventListener("click",v=>{z(v,n.current).some(w=>w===!0)&&(n.current.close(),d())},!0);const p=v=>{v.key==="Escape"&&d()};return addEventListener("keydown",p),()=>removeEventListener("keydown",p)},[a,n]),m.useEffect(()=>{try{if(!(o.current instanceof HTMLButtonElement))throw g(o.current,`Button for confirming exclusion related to ${(t==null?void 0:t.id)??"UNIDENTIFIED"}`,h(new Error));(l==="coordenador"||l==="supervisor")&&sr(t,l)}catch(d){console.warn(`Error fetching reference for confirm button:
      ${d.message}`)}},[o,t,l]),e.jsx(e.Fragment,{children:a&&e.jsx("dialog",{role:"alertdialog",ref:n,className:"modal-content modal-content-fit",id:"exclude-cons-dlg",onClick:d=>{z(d,d.currentTarget).some(p=>p===!0)&&(d.currentTarget.close(),r(!a))},children:e.jsx(q,{FallbackComponent:()=>e.jsx(te,{renderError:new Error("Erro carregando a janela modal!"),onClick:c}),children:e.jsxs("section",{role:"alert",className:"flexNoWC flexJC rGap2v",children:[e.jsxs("div",{role:"group",className:"flexJC flexAlItCt flexNoWC wsBs noInvert",children:[e.jsx("h3",{children:"Confirmar remoção?"}),e.jsx("small",{role:"textbox",children:"Esse processo é parcialmente ou totalmente irreversível!"})]}),e.jsx("button",{className:"btn btn-warning bolded",onClick:c,ref:o,children:"Confirmar"})]})})})})}function br(){const[r,a]=m.useState(!1),t=m.useRef(null),l=m.useContext(X).userClass;return m.useEffect(()=>{var n;try{if(!(t.current instanceof HTMLButtonElement))throw g(t.current,`${((n=t.current)==null?void 0:n.id)??"UNIDENTIFIED"}`,h(new Error));const o=t.current.closest("slot");if(!(o instanceof HTMLElement))throw g(o,"slot for erase appointment btn",h(new Error));t.current.id=t.current.id.replace("unfilled",o.id.replace("slot_",""))}catch(o){console.warn(`Error with reference for button:
      ${o.message}`)}},[t]),e.jsxs(q,{FallbackComponent:()=>e.jsx(H,{message:"Erro carregando botão de excluir"}),children:[e.jsx("button",{type:"button",className:"btn btn-close reduced-btn-close eraseAptBtn forceInvert",title:"Remova o agendamento relativo",id:"eraseAptBtn_unfilled",ref:t,onClick:()=>{(l==="coordenador"||l==="supervisor")&&a(!r)}}),r&&e.jsx(yr,{setDisplayExcludeDlg:a,shouldDisplayExcludeDlg:r,btn:t.current})]})}function Le({nHr:r,nRow:a,nCol:t,last:l=!1}){const n=(()=>{switch(t){case 1:return"Primeiro";case 2:return"Segundo";case 3:return"Terceiro";case 4:return"Quarto";case 5:return"Quinto";case 6:return"Sexto";case 7:return"Sétimo";case 8:return"Oitavo";case 9:return"Nono (ignorar se 01)";case 10:return"Décimo";default:return"Indefinido"}})(),o=(()=>{switch(a){case 1:return"Primeiro";case 2:return"Segundo";case 3:return"Terceiro";case 4:return"Quarto";default:return"Indefinido"}})();return e.jsx("td",{className:`tabCel${l?" lastConsDayCont":""}`,"data-col":t,"data-row":a,children:e.jsxs("slot",{className:`consSlot lcPersist htFull wid90 flexNoW cGap2v slot${r}`,id:`slot_${r}-00_${t}`,"data-row":a,"data-col":t,children:[e.jsx("input",{className:`transparent-el lcPersist slotableDay opaque-bluish wid100 form-control inp${r}-00 inp-text-${r}-00`,placeholder:"Horário Livre",id:`_${r}-00_${t}`,name:`date_${r}-00_${t}`,"data-title":`${o} Horário, ${n} dia`,"data-row":a,"data-col":t}),e.jsxs("div",{role:"group",className:"flexNoWC flexAlItCt",children:[e.jsx("input",{type:"checkbox",className:`form-check-input apptCheck redMg checkGreen invtSignal dkGreen lcPersist inp${r}-00 inp-cb-${r}-00`,id:`check_${r}-00_${t}`,name:`date_conf_${r}-00_${t}`,title:"Confirme aqui o agendamento relativo","data-title":`Confirmação do ${o} Horário, ${n} dia`,"data-row":a,"data-col":t}),e.jsx(br,{})]})]})})}function vr({mainRoot:r,nHr:a,nRow:t}){const l=[1,2,3,4,5,6,7,8,9];return e.jsxs("tr",{id:`tr${a}`,"data-row":t,children:[e.jsx("td",{className:"tabCel","data-col":"0","data-row":t,children:e.jsx("span",{role:"textbox",children:e.jsx("strong",{className:"hour","data-hour":`${a}:00`,children:`${a}:00`})})}),l.map((n,o,c)=>n===c.slice(-1)[0]?e.jsx(Le,{nCol:n,nRow:t,nHr:a,mainRoot:r,last:!0},`td_schedule__${t}-${n}-${a}`):e.jsx(Le,{nCol:n,nRow:t,nHr:a,mainRoot:r},`td_schedule__${t}-${n}-${a}`))]})}function wr({dispatch:r,state:a,shouldShowAlocBtn:t}){const[l,n]=m.useState(!1),o=m.useRef(null),[c,d]=re(),p=De();return m.useEffect(()=>(c.get("av-pac")!=="open"&&d({"av-pac":"open"}),()=>{const v=new URLSearchParams(c);v.delete("av-pac"),d(v)}),[c,d]),m.useEffect(()=>{if((o==null?void 0:o.current)instanceof HTMLDialogElement){o.current.showModal(),L([...o.current.querySelectorAll("*"),o.current]);const v=w=>{w.key==="Escape"&&n(D=>!D)};return addEventListener("keydown",v),()=>removeEventListener("keydown",v)}else g(o.current,"dialogElement in AvPacListDlg",h(new Error))},[o]),e.jsx(e.Fragment,{children:a&&e.jsx("dialog",{className:"modal-content-stk2",id:"avPacListDlg",ref:o,onClick:v=>{z(v,v.currentTarget).some(w=>w===!0)&&(r(!a),p("?",{replace:!0}))},children:e.jsxs(q,{FallbackComponent:()=>e.jsx(te,{renderError:new Error("Erro carregando a janela modal!"),onClick:()=>r(a)}),children:[e.jsxs("section",{className:"flexRNoWBetCt widFull",id:"headPacList",children:[e.jsx("h2",{className:"mg-1b noInvert",children:e.jsx("strong",{children:"Pacientes Cadastrados"})}),e.jsx("button",{className:"btn btn-close forceInvert",onClick:()=>r(!a)})]}),e.jsx(cr,{setDisplayRowData:n,shouldDisplayRowData:l,shouldShowAlocBtn:t,dispatch:r,state:a})]})})})}function Tr(r){const a=m.useContext(X).userClass,t=m.useMemo(()=>[],[]),l=m.useMemo(()=>[],[]),n=m.useRef(null),o=m.useRef(null),c=m.useRef(null),d=m.useRef(null),p=m.useRef(null),v=m.useRef(null),[w,D]=re();return m.useEffect(()=>(w.has("av-prof")||D({...Object.fromEntries(w),"av-prof":"open"}),setTimeout(()=>{history.pushState({},"",`${location.href}`.replaceAll("/?","?").replaceAll("/#","#"))},300),()=>{const C=new URLSearchParams(w);C.delete("av-prof"),D(C)}),[w,D]),m.useEffect(()=>{if(n.current instanceof HTMLDialogElement){n.current.showModal();const C=I=>{I.key==="Escape"&&r.dispatch(!r.state)};return addEventListener("keydown",C),()=>removeEventListener("keydown",C)}else g(n.current,"dialogElement in AvStudListDlg",h(new Error))},[r,r.mainDlgRef]),m.useEffect(()=>{try{if(!(p.current instanceof HTMLTableSectionElement))throw g(p.current,"Validation of Table Body instance",h(new Error));if(!(d.current instanceof HTMLTableSectionElement))throw g(p.current,"Validation of Table Body instance",h(new Error));if(t.length>0&&l.length>0&&p.current.querySelector("tr")&&d.current.querySelector("tr"))return;setTimeout(()=>{t.length>0||l.length>0||K("profs","_table",!0).then(C=>{var u,y;C.forEach(s=>{s.external?!l.includes(s)&&l.push({name:s.name,tel:s.tel,email:s.email,area:s.area,start_day:s.start_day,end_day:s.end_day,day:s.day,idf:s.idf,external:s.external||!1}):!t.includes(s)&&t.push({name:s.name,tel:s.tel,email:s.email,area:s.area,start_day:s.start_day,end_day:s.end_day,day:s.day,idf:s.idf,external:s.external||!1})});try{if(!(o.current instanceof HTMLElement))throw g(o.current,"Validation of Table reference",h(new Error));if(!(o.current instanceof HTMLElement))throw g(c.current,"Validation of Table reference",h(new Error));if(!(p.current instanceof HTMLTableSectionElement))throw g(p.current,"Validation of Table Body instance",h(new Error));if(!(d.current instanceof HTMLTableSectionElement))throw g(p.current,"Validation of Table Body instance",h(new Error));f[`${d.current.id}`]&&!f[`${d.current.id}`]._internalRoot?setTimeout(()=>{var s,S,T;try{if(!(o.current instanceof HTMLElement))throw g(o.current,"Validation of Table reference",h(new Error));if(!(d.current instanceof HTMLElement))throw g(d.current,"Validation of Table Body Reference",h(new Error));if(d.current.querySelector("tr"))return;if((s=f[`${d.current.id}`])==null||s.unmount(),delete f[`${d.current.id}`],d.current.remove(),f[`${o.current.id}`]||(f[`${o.current.id}`]=A(o.current)),(S=f[`${o.current.id}`])==null||S.render(e.jsxs(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for table body"}),children:[e.jsx("caption",{className:"caption-t",children:e.jsxs("hgroup",{className:"noInvert",children:[e.jsx("h3",{className:"noInvert",children:e.jsx("strong",{children:"Membros Internos"})}),e.jsx("strong",{children:e.jsx("small",{role:"textbox",className:"noInvert",children:e.jsxs("em",{className:"noInvert",children:["Lista Recuperada da Ficha de Profissionais registrados. Acesse",e.jsxs("samp",{children:[" ",e.jsx("a",{children:" ROTA_PLACEHOLDER "})," "]})," ","para cadastrar"]})})})]})}),e.jsxs("colgroup",{children:[e.jsx("col",{"data-row":"1","data-col":"1"}),e.jsx("col",{"data-row":"1","data-col":"2"}),e.jsx("col",{"data-row":"1","data-col":"3"}),e.jsx("col",{"data-row":"1","data-col":"4"}),e.jsx("col",{"data-row":"1","data-col":"5"}),e.jsx("col",{"data-row":"1","data-col":"6"}),e.jsx("col",{"data-row":"1","data-col":"7"}),a==="coordenador"&&e.jsx("col",{"data-row":"1","data-col":"8"})]}),e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{id:"avProfsInt-row1","data-row":"1",children:[a==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"1",children:"Identificador"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"2":"1",children:"Nome"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"3":"2",children:"E-mail"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"4":"3",children:"Telefone"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"5":"4",children:"Área de Atuação"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"6":"5",children:"Dia de Trablho"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"7":"6",children:"Período de Participação"}),e.jsx("th",{className:"alocCel",scope:"col","data-row":"1","data-col":a==="coordenador"?"8":"7"})]})}),e.jsx("tbody",{id:"profsIntTbody",ref:d,children:e.jsx("span",{style:{margin:"2rem",position:"absolute"},children:e.jsx(ee,{spinnerClass:"spinner-border",spinnerColor:"text-info",message:"Loading Internal Professionals Table..."})})})]})),d.current=document.getElementById("profsIntTbody"),!(d.current instanceof HTMLElement))throw g(d.current,"Validation of replaced tbody",h(new Error));f[`${d.current.id}`]||(f[`${d.current.id}`]=A(d.current)),d.current.querySelector("tr")||(T=f[`${d.current.id}`])==null||T.render(t.map((j,E)=>e.jsx(ae,{nRow:E+2,prof:j,tabRef:o,inDlg:!0},`prof_int_row__${E+2}`))),setTimeout(()=>{var j;(o==null?void 0:o.current)instanceof HTMLTableElement?(V(o.current),U(o.current)):g(o.current,`tabProfIntRef id ${((j=o==null?void 0:o.current)==null?void 0:j.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error))},300)}catch(j){console.error(`Error executing scheduled rendering of Table Body Content Replacement:
${j.message}`)}},1e3):f[`${d.current.id}`]=A(d.current),d.current.querySelector("tr")||(u=f[`${d.current.id}`])==null||u.render(t.map((s,S)=>{var T,j;return Array.from(((T=d.current)==null?void 0:T.querySelectorAll("output"))??[]).some(E=>E.innerText===s.idf)||Array.from(((j=d.current)==null?void 0:j.querySelectorAll("tr"))??[]).some(E=>{var N;return E.dataset.key&&((N=d.current)==null?void 0:N.querySelector(`tr[data-key=${E.dataset.key}`))})?e.jsx(e.Fragment,{}):e.jsx(ae,{nRow:S+2,prof:s,tabRef:o,inDlg:!0},`prof_int_row__${S+2}`)})),setTimeout(()=>{var s;(o==null?void 0:o.current)instanceof HTMLTableElement?(V(o.current),U(o.current)):g(o.current,`tabProfIntRef id ${((s=o==null?void 0:o.current)==null?void 0:s.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error))},300),setTimeout(()=>{var s;!document.querySelector("tr")&&document.querySelector("table")&&(f[`${document.querySelector("table").id}`]||(f[`${document.querySelector("table").id}`]=A(document.querySelector("table"))),(s=f[`${document.querySelector("table").id}`])==null||s.render(e.jsx(H,{message:"Failed to render table"})))},5e3),f[`${p.current.id}`]&&!f[`${p.current.id}`]._internalRoot?setTimeout(()=>{var s,S,T;try{if(!(o.current instanceof HTMLElement))throw g(o.current,"Validation of Table reference",h(new Error));if(!(p.current instanceof HTMLElement))throw g(p.current,"Validation of Table Body Reference",h(new Error));if(p.current.querySelector("tr"))return;if((s=f[`${p.current.id}`])==null||s.unmount(),delete f[`${p.current.id}`],p.current.remove(),f[`${o.current.id}`]||(f[`${o.current.id}`]=A(o.current)),(S=f[`${o.current.id}`])==null||S.render(e.jsxs(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for table body"}),children:[e.jsx("caption",{className:"caption-t",children:e.jsxs("hgroup",{className:"noInvert",children:[e.jsx("h3",{className:"noInvert",children:e.jsx("strong",{children:"Membros Externos"})}),e.jsx("strong",{children:e.jsx("small",{role:"textbox",className:"noInvert",children:e.jsxs("em",{className:"noInvert",children:["Lista Recuperada da Ficha de Profissionais registrados. Acesse",e.jsxs("samp",{children:[" ",e.jsx("a",{children:" ROTA_PLACEHOLDER "})," "]})," ","para cadastrar"]})})})]})}),e.jsxs("colgroup",{children:[e.jsx("col",{"data-row":"1","data-col":"1"}),e.jsx("col",{"data-row":"1","data-col":"2"}),e.jsx("col",{"data-row":"1","data-col":"3"}),e.jsx("col",{"data-row":"1","data-col":"4"}),e.jsx("col",{"data-row":"1","data-col":"5"}),e.jsx("col",{"data-row":"1","data-col":"6"}),e.jsx("col",{"data-row":"1","data-col":"7"}),a==="coordenador"&&e.jsx("col",{"data-row":"1","data-col":"8"})]}),e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{id:"avProfsExt-row1","data-row":"1",children:[a==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"1",children:"Identificador"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"2":"1",children:"Nome"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"3":"2",children:"E-mail"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"4":"3",children:"Telefone"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"5":"4",children:"Área de Atuação"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"6":"5",children:"Dia de Trablho"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"7":"6",children:"Período de Participação"}),e.jsx("th",{className:"alocCel",scope:"col","data-row":"1","data-col":a==="coordenador"?"8":"7"})]})}),e.jsx("tbody",{id:"profsExtTbody",ref:p,children:e.jsx("span",{style:{margin:"2rem",position:"absolute"},children:e.jsx(ee,{spinnerClass:"spinner-border",spinnerColor:"text-info",message:"Loading External Professionals Table..."})})})]})),p.current=document.getElementById("profsExtTbody"),!(p.current instanceof HTMLElement))throw g(p.current,"Validation of replaced tbody",h(new Error));f[`${p.current.id}`]||(f[`${p.current.id}`]=A(p.current)),p.current.querySelector("tr")||(T=f[`${p.current.id}`])==null||T.render(l.map((j,E)=>e.jsx(ae,{nRow:E+2,prof:j,tabRef:o,inDlg:!0},`prof_ext_row__${E+2}`))),setTimeout(()=>{var j;(o==null?void 0:o.current)instanceof HTMLTableElement?(V(o.current),U(o.current)):g(o.current,`tabProfIntRef id ${((j=o==null?void 0:o.current)==null?void 0:j.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error))},300)}catch(j){console.error(`Error executing scheduled rendering of Table Body Content Replacement:
${j.message}`)}},1e3):f[`${p.current.id}`]=A(p.current),p.current.querySelector("tr")||(y=f[`${p.current.id}`])==null||y.render(l.map((s,S)=>{var T,j;return Array.from(((T=p.current)==null?void 0:T.querySelectorAll("output"))??[]).some(E=>E.innerText===s.idf)||Array.from(((j=p.current)==null?void 0:j.querySelectorAll("tr"))??[]).some(E=>{var N;return E.dataset.key&&((N=p.current)==null?void 0:N.querySelector(`tr[data-key=${E.dataset.key}`))})?e.jsx(e.Fragment,{}):e.jsx(ae,{nRow:S+2,prof:s,tabRef:o,inDlg:!0},`prof_ext_row__${S+2}`)})),setTimeout(()=>{var s;(o==null?void 0:o.current)instanceof HTMLTableElement?(V(o.current),U(o.current)):g(o.current,`tabProfIntRef id ${((s=o==null?void 0:o.current)==null?void 0:s.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error))},300),setTimeout(()=>{var s;!document.querySelector("tr")&&document.querySelector("table")&&(f[`${document.querySelector("table").id}`]||(f[`${document.querySelector("table").id}`]=A(document.querySelector("table"))),(s=f[`${document.querySelector("table").id}`])==null||s.render(e.jsx(H,{message:"Failed to render table"})))},5e3)}catch(s){console.error(`Error executing rendering of Table Body Content:
${s.message}`)}const I=()=>{var s,S,T,j;try{if(!((c==null?void 0:c.current)instanceof HTMLTableElement))throw g(c.current,`tabProfExtRef id ${((s=c==null?void 0:c.current)==null?void 0:s.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error));U(c.current),V(c.current),r.dispatch&&c.current.querySelectorAll(".btnAloc").forEach((G,Y)=>{try{xe(G,n.current,r.mainDlgRef.current,"Prof",r.state,r.dispatch,a)}catch(W){console.error(`Error executing iteration ${Y} for adding alocation listener to external professionals table:
${W.message}`)}});const E=(S=r.mainDlgRef.current)==null?void 0:S.querySelector("#typeConsSel");if(!(E instanceof HTMLSelectElement))throw B(E,`<select> for getting type of appointment for ${((T=c.current)==null?void 0:T.id)||"UNIDENTIFIED"}`,h(new Error));const[N]=Array.from(E.querySelectorAll("option")).filter(G=>G.selected===!0);if(!(N instanceof HTMLOptionElement))throw g(N,`<option> for getting type of appointment for ${((j=c.current)==null?void 0:j.id)||"UNIDENTIFIED"}`,h(new Error));const R=N.closest("optgroup");R instanceof HTMLOptGroupElement&&R.label!==""&&ge(c.current,R.label.toLowerCase().trim())}catch(E){console.error(`Error executing styling for External Professionals Tables:
${E.message}`)}},F=()=>{var s,S,T,j;try{if(!((o==null?void 0:o.current)instanceof HTMLTableElement))throw g(o.current,`Table id ${((s=o==null?void 0:o.current)==null?void 0:s.id)||"UNIDENTIFIED"}`,h(new Error));U(o.current),V(o.current),r.dispatch&&o.current.querySelectorAll(".btnAloc").forEach((G,Y)=>{try{xe(G,n.current,r.mainDlgRef.current,"Prof",r.state,r.dispatch,a)}catch(W){console.error(`Error executing iteration ${Y} for adding alocation listener to external professionals table:
${W.message}`)}});const E=(S=r.mainDlgRef.current)==null?void 0:S.querySelector("#typeConsSel");if(!(E instanceof HTMLSelectElement))throw B(E,`<select> for getting type of appointment for ${((T=o.current)==null?void 0:T.id)||"UNIDENTIFIED"}`,h(new Error));const[N]=Array.from(E.querySelectorAll("option")).filter(G=>G.selected===!0);if(!(N instanceof HTMLOptionElement))throw g(N,`<option> for getting type of appointment for ${((j=o.current)==null?void 0:j.id)||"UNIDENTIFIED"}`,h(new Error));const R=N.closest("optgroup");if(R instanceof HTMLOptGroupElement&&R.label!==""&&ge(o.current,R.label.toLowerCase().trim()),!((v==null?void 0:v.current)instanceof HTMLElement))throw g(v.current,"secttabProfIntRef in useEffect()",h(new Error));qe(v.current),ke(v.current)}catch(E){console.error(`Error executing styling for Internal Professionals Tables:
${E.message}`)}};setTimeout(()=>{var s,S;(s=p.current)!=null&&s.querySelector("tr")?I():setTimeout(()=>I(),1800),(S=d.current)!=null&&S.querySelector("tr")?F():setTimeout(()=>F(),1800)},1200)}).catch(C=>console.error(`Failed to fetch from Professionals Table: ${C.message}`)).finally(()=>{setTimeout(()=>{var C;return L([...((C=n.current)==null?void 0:C.querySelectorAll("*"))??[],n.current])},1200),setTimeout(()=>{var C;return L([...((C=n.current)==null?void 0:C.querySelectorAll("*"))??[],n.current])},3e3)})},300)}catch(C){console.error(`Error executing useEffect for Table Body Reference:
${C.message}`)}},[r.dispatch,r.mainDlgRef,a]),e.jsx(e.Fragment,{children:r.state&&r.btnProf instanceof HTMLButtonElement&&e.jsx("dialog",{className:"modal-content-stk2",id:"avProfListDlg",ref:n,onClick:C=>{z(C,C.currentTarget).some(I=>I===!0)&&r.dispatch(!r.state)},children:e.jsxs(q,{FallbackComponent:()=>e.jsx(te,{renderError:new Error("Erro carregando a janela modal!"),onClick:r.dispatch(r.state)}),children:[e.jsxs("section",{className:"flexRNoWBetCt widFull",id:"headProfList",children:[e.jsx("h2",{className:"mg-1b noInvert",children:e.jsx("strong",{children:"Profissionais Cadastrados"})}),e.jsx("button",{className:"btn btn-close forceInvert",onClick:()=>r.dispatch(!r.state)})]}),e.jsxs("section",{className:"form-padded",id:"sectProfsTabs",ref:v,children:[e.jsxs("table",{className:"table table-striped table-responsive table-hover tabProfs",id:"avProfsIntTab",ref:o,children:[e.jsx("caption",{className:"caption-t",children:e.jsxs("hgroup",{className:"noInvert",children:[e.jsx("h3",{className:"noInvert",children:e.jsx("strong",{children:"Membros Internos"})}),e.jsx("strong",{children:e.jsx("small",{role:"textbox",className:"noInvert",children:e.jsxs("em",{className:"noInvert",children:["Lista Recuperada da Ficha de Profissionais registrados. Acesse",e.jsxs("samp",{children:[" ",e.jsx("a",{children:" ROTA_PLACEHOLDER "})," "]})," ","para cadastrar"]})})})]})}),e.jsxs("colgroup",{children:[e.jsx("col",{"data-row":"1","data-col":"1"}),e.jsx("col",{"data-row":"1","data-col":"2"}),e.jsx("col",{"data-row":"1","data-col":"3"}),e.jsx("col",{"data-row":"1","data-col":"4"}),e.jsx("col",{"data-row":"1","data-col":"5"}),e.jsx("col",{"data-row":"1","data-col":"6"}),e.jsx("col",{"data-row":"1","data-col":"7"}),a==="coordenador"&&e.jsx("col",{"data-row":"1","data-col":"8"})]}),e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{id:"avProfsInt-row1","data-row":"1",children:[a==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"1",children:"Identificador"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"2":"1",children:"Nome"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"3":"2",children:"E-mail"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"4":"3",children:"Telefone"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"5":"4",children:"Área de Atuação"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"6":"5",children:"Dia de Trablho"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"7":"6",children:"Período de Participação"}),e.jsx("th",{className:"alocCel",scope:"col","data-row":"1","data-col":a==="coordenador"?"8":"7"})]})}),e.jsx("tbody",{id:"profsIntTbody",ref:d,children:e.jsx("span",{style:{margin:"2rem",position:"absolute"},children:e.jsx(ee,{spinnerClass:"spinner-border",spinnerColor:"text-info",message:"Loading Internal Professionals Table..."})})})]}),e.jsxs("table",{className:"table table-striped table-responsive table-hover tabProfs",id:"avProfsExtTab",ref:c,children:[e.jsx("caption",{className:"caption-t",children:e.jsxs("hgroup",{className:"noInvert",children:[e.jsx("h3",{className:"noInvert",children:e.jsx("strong",{children:"Membros Externos"})}),e.jsx("strong",{children:e.jsx("small",{role:"textbox",className:"noInvert",children:e.jsxs("em",{className:"noInvert",children:["Lista Recuperada da Ficha de Profissionais registrados. Acesse",e.jsxs("samp",{children:[" ",e.jsx("a",{children:" ROTA_PLACEHOLDER "})," "]})," ","para cadastrar"]})})})]})}),e.jsxs("colgroup",{children:[e.jsx("col",{"data-row":"1","data-col":"1"}),e.jsx("col",{"data-row":"1","data-col":"2"}),e.jsx("col",{"data-row":"1","data-col":"3"}),e.jsx("col",{"data-row":"1","data-col":"4"}),e.jsx("col",{"data-row":"1","data-col":"5"}),e.jsx("col",{"data-row":"1","data-col":"6"}),e.jsx("col",{"data-row":"1","data-col":"7"}),a==="coordenador"&&e.jsx("col",{"data-row":"1","data-col":"8"})]}),e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{id:"avProfsExt-row1","data-row":"1",children:[a==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"1",children:"Identificador"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"2":"1",children:"Nome"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"3":"2",children:"E-mail"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"4":"3",children:"Telefone"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"5":"4",children:"Área de Atuação"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"6":"5",children:"Dia de Trablho"}),e.jsx("th",{scope:"col","data-row":"1","data-col":a==="coordenador"?"7":"6",children:"Período de Participação"}),e.jsx("th",{className:"alocCel",scope:"col","data-row":"1","data-col":a==="coordenador"?"8":"7"})]})}),e.jsx("tbody",{id:"profsExtTbody",ref:p,children:e.jsx("span",{style:{margin:"2rem",position:"absolute"},children:e.jsx(ee,{spinnerClass:"spinner-border",spinnerColor:"text-info",message:"Loading External Professionals Table..."})})})]})]})]})})})}function Sr({mainDlgRef:r,dispatch:a,state:t=!0}){const l=m.useRef(null),n=m.useRef(null),o=m.useMemo(()=>[],[]),c=m.useContext(X).userClass;return m.useEffect(()=>{try{if(!(n.current instanceof HTMLTableSectionElement))throw g(n.current,"Validation of Table Body instance",h(new Error));if(o.length>0&&n.current.querySelector("tr"))return;setTimeout(()=>{o.length>0||K("studs","_table",!0).then(d=>{var v;d.forEach(w=>{!o.includes(w)&&o.push({name:w.name,tel:w.tel,email:w.email,area:w.area,start_day:w.start_day,end_day:w.end_day,day:w.day,cpf:w.cpf,dre:w.dre})});try{if(!(l.current instanceof HTMLElement))throw g(l.current,"Validation of Table reference",h(new Error));if(!(n.current instanceof HTMLElement))throw g(n.current,"Validation of Table Body Reference",h(new Error));f[`${n.current.id}`]&&!f[`${n.current.id}`]._internalRoot?setTimeout(()=>{var w,D,C;try{if(!(l.current instanceof HTMLElement))throw g(l.current,"Validation of Table reference",h(new Error));if(!(n.current instanceof HTMLElement))throw g(n.current,"Validation of Table Body Reference",h(new Error));if(n.current.querySelector("tr"))return;if((w=f[`${n.current.id}`])==null||w.unmount(),delete f[`${n.current.id}`],n.current.remove(),f[`${l.current.id}`]||(f[`${l.current.id}`]=A(l.current)),(D=f[`${l.current.id}`])==null||D.render(e.jsxs(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for table body"}),children:[e.jsx("caption",{className:"caption-t",children:e.jsx("strong",{children:e.jsx("small",{role:"textbox",className:"noInvert",children:e.jsxs("em",{className:"noInvert",children:["Lista Recuperada da Ficha de Estudantes registrados. Acesse",e.jsx("samp",{children:e.jsx("a",{children:" ROTA_PLACEHOLDER "})})," ","para cadastrar"]})})})}),e.jsxs("colgroup",{children:[e.jsx("col",{"data-col":"1"}),e.jsx("col",{"data-col":"2"}),e.jsx("col",{"data-col":"3"}),e.jsx("col",{"data-col":"4"}),e.jsx("col",{"data-col":"5"}),e.jsx("col",{"data-col":"6"}),e.jsx("col",{"data-col":"7"}),c==="coordenador"&&e.jsx("col",{"data-col":"8"}),c==="coordenador"&&e.jsx("col",{"data-col":"9"})]}),e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{id:"avStuds-row1","data-row":"1",children:[c==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"1",children:"CPF"}),c==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"2",children:"DRE"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"3":"1",children:"Nome"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"4":"2",children:"E-mail"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"5":"3",children:"Telefone"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"6":"4",children:"Curso"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"7":"5",children:"Dia De Atividade"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"8":"6",children:"Período de Participação"}),e.jsx("th",{className:"alocCel",scope:"col","data-row":"1","data-col":c==="coordenador"?"9":"7"})]})}),e.jsx("tbody",{id:"avStudsTbody",ref:n,children:e.jsx("span",{style:{margin:"2rem",position:"absolute"},children:e.jsx(ee,{spinnerClass:"spinner-border",spinnerColor:"text-info",message:"Loading Students Table..."})})})]})),n.current=document.getElementById("avStudsTbody"),!(n.current instanceof HTMLElement))throw g(n.current,"Validation of replaced tbody",h(new Error));f[`${n.current.id}`]||(f[`${n.current.id}`]=A(n.current)),n.current.querySelector("tr")||(C=f[`${n.current.id}`])==null||C.render(o.map((I,F)=>e.jsx(Ne,{nRow:F+2,stud:I,tabRef:l,inDlg:!0},`stud_row__${F+2}`))),setTimeout(()=>{var I;(l==null?void 0:l.current)instanceof HTMLTableElement?(V(l.current),U(l.current)):g(l.current,`tabRef id ${((I=l==null?void 0:l.current)==null?void 0:I.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error))},300)}catch(I){console.error(`Error executing scheduled rendering of Table Body Content Replacement:
${I.message}`)}},1e3):f[`${n.current.id}`]=A(n.current),n.current.querySelector("tr")||(v=f[`${n.current.id}`])==null||v.render(o.map((w,D)=>{var C,I;return Array.from(((C=n.current)==null?void 0:C.querySelectorAll("output"))??[]).some(F=>F.innerText===w.cpf)||Array.from(((I=n.current)==null?void 0:I.querySelectorAll("tr"))??[]).some(F=>{var u;return F.dataset.key&&((u=n.current)==null?void 0:u.querySelector(`tr[data-key=${F.dataset.key}`))})?e.jsx(e.Fragment,{}):e.jsx(Ne,{nRow:D+2,stud:w,tabRef:l,inDlg:!0},`stud_row__${D+2}`)})),setTimeout(()=>{var w;(l==null?void 0:l.current)instanceof HTMLTableElement?(V(l.current),U(l.current)):g(l.current,`tabRef id ${((w=l==null?void 0:l.current)==null?void 0:w.id)||"UNIDENTIFIED"} in useEffect() for tableRef`,h(new Error))},300),setTimeout(()=>{var w;!document.querySelector("tr")&&document.querySelector("table")&&(f[`${document.querySelector("table").id}`]||(f[`${document.querySelector("table").id}`]=A(document.querySelector("table"))),(w=f[`${document.querySelector("table").id}`])==null||w.render(e.jsx(H,{message:"Failed to render table"})))},5e3)}catch(w){console.error(`Error executing rendering of Table Body Content:
${w.message}`)}const p=()=>{var w,D,C;try{if(!(l.current instanceof HTMLElement))throw g(l.current,"Validation of Students Table",h(new Error));a&&l.current.querySelectorAll(".btnAloc").forEach((y,s)=>{var S;try{xe(y,document.getElementById("avStudListDlg")??((S=l.current)==null?void 0:S.closest("dialog")),r.current,"Stud",t,a,c)}catch(T){console.error(`Error executing iteration ${s} for adding listener for alocation:
${T.message}`)}}),V(l.current),qe(l.current),ke(l.current),document.getElementById("btnExport")&&oe(c,["coordenador"],l.current,document.getElementById("btnExport"));const I=(w=r.current)==null?void 0:w.querySelector("#typeConsSel");if(!(I instanceof HTMLSelectElement))throw B(I,`<select> for getting type of appointment for ${((D=l.current)==null?void 0:D.id)||"UNIDENTIFIED"}`,h(new Error));const[F]=Array.from(I.querySelectorAll("option"));if(!(F instanceof HTMLOptionElement))throw g(F,`<option> for getting type of appointment for ${((C=l.current)==null?void 0:C.id)||"UNIDENTIFIED"}`,h(new Error));const u=F.closest("optgroup");u instanceof HTMLOptGroupElement&&u.label!==""&&ge(l.current,u.label.toLowerCase().trim())}catch(I){console.error(`Error executing handleAttempt for filtering of Students Table:
${I.message}`)}};setTimeout(()=>{var w;(w=n.current)!=null&&w.querySelector("tr")?p():setTimeout(()=>p(),1800)},1200)}).catch(d=>console.error(`Failed to fetch from Studs Table: ${d.message}`)).finally(()=>{setTimeout(()=>{var d;return L([...((d=l.current)==null?void 0:d.querySelectorAll("*"))??[],l.current])},1200),setTimeout(()=>{var d;return L([...((d=l.current)==null?void 0:d.querySelectorAll("*"))??[],l.current])},3e3)})},300)}catch(d){console.error(`Error executing useEffect for Table Body Reference:
${d.message}`)}},[r,a,c]),e.jsxs("table",{className:"table table-striped table-responsive table-hover tabProfs",id:"avStudsTab",ref:l,children:[e.jsx("caption",{className:"caption-t",children:e.jsx("strong",{children:e.jsx("small",{role:"textbox",className:"noInvert",children:e.jsxs("em",{className:"noInvert",children:["Lista Recuperada da Ficha de Estudantes registrados. Acesse",e.jsx("samp",{children:e.jsx("a",{children:" ROTA_PLACEHOLDER "})})," ","para cadastrar"]})})})}),e.jsxs("colgroup",{children:[e.jsx("col",{"data-col":"1"}),e.jsx("col",{"data-col":"2"}),e.jsx("col",{"data-col":"3"}),e.jsx("col",{"data-col":"4"}),e.jsx("col",{"data-col":"5"}),e.jsx("col",{"data-col":"6"}),e.jsx("col",{"data-col":"7"}),c==="coordenador"&&e.jsx("col",{"data-col":"8"}),c==="coordenador"&&e.jsx("col",{"data-col":"9"})]}),e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{id:"avStuds-row1","data-row":"1",children:[c==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"1",children:"CPF"}),c==="coordenador"&&e.jsx("th",{scope:"col","data-row":"1","data-col":"2",children:"DRE"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"3":"1",children:"Nome"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"4":"2",children:"E-mail"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"5":"3",children:"Telefone"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"6":"4",children:"Curso"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"7":"5",children:"Dia De Atividade"}),e.jsx("th",{scope:"col","data-row":"1","data-col":c==="coordenador"?"8":"6",children:"Período de Participação"}),e.jsx("th",{className:"alocCel",scope:"col","data-row":"1","data-col":c==="coordenador"?"9":"7"})]})}),e.jsx("tbody",{id:"avStudsTbody",ref:n,children:e.jsx("span",{style:{margin:"2rem",position:"absolute"},children:e.jsx(ee,{spinnerClass:"spinner-border",spinnerColor:"text-info",message:"Loading Students Table..."})})})]})}function Nr({forwardedRef:r,dispatch:a,state:t=!1}){const l=m.useRef(null),n=m.useRef(null),[o,c]=re(),d=De();return m.useEffect(()=>(o.get("av-stud")!=="open"&&c({"av-stud":"open"}),()=>{const p=new URLSearchParams(o);p.delete("av-stud"),c(p)}),[o,c]),m.useEffect(()=>{if((l==null?void 0:l.current)instanceof HTMLDialogElement){l.current.showModal(),L([...l.current.querySelectorAll("*"),l.current]);const p=v=>{v.key==="Escape"&&a(t)};return addEventListener("keydown",p),()=>removeEventListener("keydown",p)}else g(l.current,"dialogElement in AvStudListDlg",h(new Error))},[r,l,a]),e.jsx(e.Fragment,{children:t&&e.jsx("dialog",{className:"modal-content-stk2",id:"avStudListDlg",ref:l,onClick:p=>{z(p,p.currentTarget).some(v=>v===!0)&&(a(!t),d("?",{replace:!0}))},children:e.jsxs(q,{FallbackComponent:()=>e.jsx(te,{renderError:new Error("Erro carregando a janela modal!"),onClick:()=>a(!t)}),children:[e.jsxs("section",{className:"flexRNoWBetCt",id:"headStudList",children:[e.jsx("h2",{className:"mg-1b noInvert",children:e.jsx("strong",{children:"Estudantes Cadastrados"})}),e.jsx("button",{className:"btn btn-close forceInvert",onClick:()=>a(!t)})]}),e.jsx("section",{className:"form-padded",id:"sectStudsTab",ref:n,children:e.jsx(Sr,{mainDlgRef:r,state:t,dispatch:a})})]})})})}function Cr({forwardedRef:r}){const a=m.useRef(null),t=m.useRef(null),[l,n]=m.useState(!1),[o]=re(),c=(d=!1)=>n(!d);return m.useEffect(()=>{o.get("av-stud")==="open"&&n(!0)},[o]),m.useEffect(()=>{t.current instanceof HTMLDivElement&&(He(r||t,!1),J.globalDataProvider&&J.globalDataProvider.initPersist(t.current,J.globalDataProvider),L([...t.current.querySelectorAll("*"),t.current]))},[t,r]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100 widFull mg-1b",id:"CPFFillerDiv",ref:t,children:[e.jsx("label",{className:"stLab",id:"hRelStud",children:"CPF do Estudante Alocado:"}),e.jsxs("div",{role:"group",className:"flexNoWRSwitch cGap5",id:"firstNamePacBody",children:[e.jsx("input",{className:"form-control ssPersist",id:"inpCPFStudFiller",list:"listCPFStudsCons","data-title":"CPF de Estudante Alocado",maxLength:16,placeholder:"Preencha com o CPF do Estudante Alocado",onInput:d=>Q(d.currentTarget,{min:1,max:16,pattern:["^(d{3}.){2}d{3}-d{2}$",""]})}),e.jsxs("datalist",{id:"listCPFStudsCons",children:[e.jsxs("optgroup",{label:"Odontologia",children:[e.jsx("option",{value:"123.456.789-12 — Odontologia",children:"Maria Eduarda Augusta"}),e.jsx("option",{value:"123.789.456-22 — Odontologia",children:"Josefina Guedes Pereira"})]}),e.jsx("optgroup",{label:"Educação Física & Nutrição",children:e.jsx("option",{value:"789.123.456-78 — Educação Física",children:"Augusto Duarte Fonseca"})})]})]})]}),e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100 widFull mg-1b",id:"DREFillerDiv",children:[e.jsx("label",{className:"stLab",id:"hRelStud",children:"DRE do Estudante Alocado:"}),e.jsxs("div",{role:"group",className:"flexNoWRSwitch cGap5",id:"firstNamePacBody",children:[e.jsx("input",{className:"form-control",id:"inpDREStudFiller ssPersist",list:"listDREStudsCons","data-title":"DRE de Estudante Alocado",maxLength:12,placeholder:"Preencha com o DRE do Estudante Alocado",onInput:d=>{Q(d.currentTarget,{min:1,max:12,pattern:["^d{9,}$",""]})}}),e.jsxs("datalist",{id:"listDREStudsCons",children:[e.jsxs("optgroup",{label:"Odontologia",children:[e.jsx("option",{value:"123456789 — Odontologia",children:"Maria Eduarda Augusta"}),e.jsx("option",{value:"987654321 — Odontologia",children:"Josefina Guedes Pereira"})]}),e.jsx("optgroup",{label:"Educação Física & Nutrição",children:e.jsx("option",{value:"111222333 — Educação Física",children:"Augusto Duarte Fonseca"})})]}),e.jsx("button",{type:"button",formMethod:"get",formAction:"#",id:"btnShowAvProfs",className:"btn btn-primary hBsFormLike",ref:a,onClick:()=>c(l),style:{fontSize:"0.9rem"},children:"Consultar Lista de Estudantes"}),l?e.jsx(Nr,{forwardedRef:r,dispatch:n,state:l}):e.jsx(e.Fragment,{})]})]})]})}function Ee({first:r=!1}){const a=m.useRef(null),t=m.useMemo(()=>[],[]);return m.useEffect(()=>{try{if(!(a.current instanceof HTMLDataListElement))throw g(a.current,"Validation of Datalist instance",h(new Error));K("patients","_table",!0).then(l=>{var n;if(l.forEach(o=>{!t.includes(o)&&t.push({name:o.name,tel:o.tel,email:o.email})}),!(a.current instanceof HTMLDataListElement))throw g(a.current,"Validation of Datalist instance",h(new Error));f[`${a.current.id}`]&&!f[`${a.current.id}`]._internalRoot?setTimeout(()=>{var o,c,d;try{if(!(a.current instanceof HTMLElement))throw g(a.current,"Validation of Datalist Reference",h(new Error));if(a.current.querySelector("option"))return;if((o=f[`${a.current.id}`])==null||o.unmount(),delete f[`${a.current.id}`],a.current.remove(),f[`${a.current.id}`]||(f[`${a.current.id}`]=A(a.current)),(c=f[`${a.current.id}`])==null||c.render(e.jsx(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for data list"}),children:e.jsx(e.Fragment,{})})),a.current=document.getElementById("listFirstNameCons"),!(a.current instanceof HTMLElement))throw g(a.current,"Validation of replaced dl",h(new Error));f[`${a.current.id}`]||(f[`${a.current.id}`]=A(a.current)),a.current.querySelector("option")||(d=f[`${a.current.id}`])==null||d.render(t.map((p,v)=>e.jsx("option",{value:r?p.name.slice(0,p.name.indexOf(" ")):p.name.slice(p.name.indexOf(" ")+1)},`${r?"first":"family"}-name-pac__${v}`)))}catch(p){console.error(`Error executing scheduled rendering of Data List Content Replacement:
${p.message}`)}},1e3):f[`${a.current.id}`]=A(a.current),a.current.querySelector("tr")||(n=f[`${a.current.id}`])==null||n.render(t.map((o,c)=>e.jsx("option",{value:r?o.name.slice(0,o.name.indexOf(" ")):o.name.slice(o.name.indexOf(" ")+1)},`${r?"first":"family"}-name-pac__${c}`)))}).catch(l=>console.error(`Failed to fetch from Patients Table for filling First Name DL: ${l.message}`)).finally(()=>{setTimeout(()=>{var l;return L([...((l=a.current)==null?void 0:l.querySelectorAll("*"))??[],a.current])},1200),setTimeout(()=>{var l;return L([...((l=a.current)==null?void 0:l.querySelectorAll("*"))??[],a.current])},3e3)})}catch(l){console.error(`Error executing useEffect for ${Ee.prototype.constructor.name}:${l.message}`)}},[r]),e.jsx("datalist",{id:r?"listFirstNameCons":"listFamilyNameCons",ref:a})}function Oe(){const r=m.useRef(null),a=m.useMemo(()=>[],[]);return m.useEffect(()=>{try{if(!(r.current instanceof HTMLDataListElement))throw g(r.current,"Validation of Datalist instance",h(new Error));K("patients","_table",!0).then(t=>{var l;if(t.forEach(n=>{!a.includes(n)&&a.push({name:n.name,tel:n.tel,email:n.email,next_appointed_day:n.next_appointed_day,treatment_beg:n.treatment_beg,treatment_end:n.treatment_end,current_status:n.current_status,signature:n.signature,historic:n.historic,idf:n.idf})}),!(r.current instanceof HTMLDataListElement))throw g(r.current,"Validation of Datalist instance",h(new Error));f[`${r.current.id}`]&&!f[`${r.current.id}`]._internalRoot?setTimeout(()=>{var n,o,c;try{if(!(r.current instanceof HTMLElement))throw g(r.current,"Validation of Datalist Reference",h(new Error));if(r.current.querySelector("option"))return;if((n=f[`${r.current.id}`])==null||n.unmount(),delete f[`${r.current.id}`],r.current.remove(),f[`${r.current.id}`]||(f[`${r.current.id}`]=A(r.current)),(o=f[`${r.current.id}`])==null||o.render(e.jsx(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for data list"}),children:e.jsx(e.Fragment,{})})),r.current=document.getElementById("listCPFPacCons"),!(r.current instanceof HTMLElement))throw g(r.current,"Validation of replaced dl",h(new Error));f[`${r.current.id}`]||(f[`${r.current.id}`]=A(r.current)),r.current.querySelector("option")||(c=f[`${r.current.id}`])==null||c.render(a.map((d,p)=>e.jsx("option",{value:d.idf,children:d.name},`cpf-pac__${p}`)))}catch(d){console.error(`Error executing scheduled rendering of Data List Content Replacement:
${d.message}`)}},1e3):f[`${r.current.id}`]=A(r.current),r.current.querySelector("tr")||(l=f[`${r.current.id}`])==null||l.render(a.map((n,o)=>e.jsx("option",{value:n.idf,children:n.name},`cpf-pac__${o}`)))}).catch(t=>console.error(`Failed to fetch from Patients Table for filling First Name DL: ${t.message}`)).finally(()=>{setTimeout(()=>{var t;return L([...((t=r.current)==null?void 0:t.querySelectorAll("*"))??[],r.current])},1200),setTimeout(()=>{var t;return L([...((t=r.current)==null?void 0:t.querySelectorAll("*"))??[],r.current])},3e3)})}catch(t){console.error(`Error executing useEffect for ${Oe.prototype.constructor.name}:${t.message}`)}},[]),e.jsx("datalist",{id:"listCPFPacCons",ref:r})}function O({grp:r,area:a}){const t=m.useRef(null),l=[];return m.useEffect(()=>{try{if(!(t.current instanceof HTMLOptGroupElement))throw g(t.current,"Validation of Optgroup instance",h(new Error));K(r,"_table",!0).then(n=>{var o;if(n.forEach(c=>{!l.includes(c)&&l.push({name:c.name,tel:c.tel,email:c.email,area:c.area,start_day:c.start_day,end_day:c.end_day,day:c.day})}),!(t.current instanceof HTMLOptGroupElement))throw g(t.current,"Validation of Optgroup instance",h(new Error));f[`${t.current.id}`]&&!f[`${t.current.id}`]._internalRoot?setTimeout(()=>{var c,d,p;try{if(!(t.current instanceof HTMLElement))throw g(t.current,"Validation of Table Body Reference",h(new Error));if(t.current.querySelector("option"))return;if((c=f[`${t.current.id}`])==null||c.unmount(),delete f[`${t.current.id}`],t.current.remove(),f[`${t.current.id}`]||(f[`${t.current.id}`]=A(t.current)),(d=f[`${t.current.id}`])==null||d.render(e.jsx(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for opt group"}),children:e.jsx(e.Fragment,{})})),t.current=document.getElementById(`OptGrp${be(r)}${a}`),!(t.current instanceof HTMLElement))throw g(t.current,"Validation of replaced tbody",h(new Error));f[`${t.current.id}`]||(f[`${t.current.id}`]=A(t.current)),t.current.querySelector("option")||(p=f[`${t.current.id}`])==null||p.render(l.map((v,w)=>new RegExp(a.slice(0,a.indexOf(" ")),"gi").test(v.area)&&e.jsx("option",{value:v.name,children:v.area},`${a}-${r}__${w}`)))}catch(v){console.error(`Error executing scheduled rendering of Optgroup Content Replacement:
${v.message}`)}},1e3):f[`${t.current.id}`]=A(t.current),t.current.querySelector("option")||(o=f[`${t.current.id}`])==null||o.render(l.map((c,d)=>new RegExp(a.slice(0,a.indexOf(" ")),"gi").test(c.area)&&e.jsx("option",{value:c.name,children:c.area},`${a}-${r}__${d}`)))}).catch(n=>console.error(`Failed to fetch from Patients Table for filling First Name DL: ${n.message}`)).finally(()=>{setTimeout(()=>{var n;return L([...((n=t.current)==null?void 0:n.querySelectorAll("*"))??[],t.current])},1200),setTimeout(()=>{var n;return L([...((n=t.current)==null?void 0:n.querySelectorAll("*"))??[],t.current])},3e3)})}catch(n){console.error(`Error executing useEffect for ${O.prototype.constructor.name}:${n.message}`)}},[a,r]),e.jsx("optgroup",{id:`OptGrp${be(r)}${a}`,label:a,ref:t})}function Qe(){const r=m.useRef(null),a=m.useMemo(()=>[],[]);return m.useEffect(()=>{try{if(!(r.current instanceof HTMLDataListElement))throw g(r.current,"Validation of Datalist instance",h(new Error));K("patients","_table",!0).then(t=>{var l;if(t.forEach(n=>{!a.includes(n)&&a.push({name:n.name,tel:n.tel,email:n.email})}),!(r.current instanceof HTMLDataListElement))throw g(r.current,"Validation of Datalist instance",h(new Error));f[`${r.current.id}`]&&!f[`${r.current.id}`]._internalRoot?setTimeout(()=>{var n,o,c;try{if(!(r.current instanceof HTMLElement))throw g(r.current,"Validation of Datalist Reference",h(new Error));if(r.current.querySelector("option"))return;if((n=f[`${r.current.id}`])==null||n.unmount(),delete f[`${r.current.id}`],r.current.remove(),f[`${r.current.id}`]||(f[`${r.current.id}`]=A(r.current)),(o=f[`${r.current.id}`])==null||o.render(e.jsx(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for data list"}),children:e.jsx(e.Fragment,{})})),r.current=document.getElementById("listTelPacCons"),!(r.current instanceof HTMLElement))throw g(r.current,"Validation of replaced dl",h(new Error));f[`${r.current.id}`]||(f[`${r.current.id}`]=A(r.current)),r.current.querySelector("option")||(c=f[`${r.current.id}`])==null||c.render(a.map((d,p)=>e.jsx("option",{value:/\s/g.test(d.tel.trim())?d.tel.trim().slice(d.tel.lastIndexOf(" ")):d.tel.trim(),children:d.name},`tel-pac__${p}`)))}catch(d){console.error(`Error executing scheduled rendering of Data List Content Replacement:
${d.message}`)}},1e3):f[`${r.current.id}`]=A(r.current),r.current.querySelector("tr")||(l=f[`${r.current.id}`])==null||l.render(a.map((n,o)=>e.jsx("option",{value:/\s/g.test(n.tel.trim())?n.tel.trim().slice(n.tel.lastIndexOf(" ")+1):n.tel.trim(),children:n.name},`tel-pac__${o}`)))}).catch(t=>console.error(`Failed to fetch from Patients Table for filling First Name DL: ${t.message}`)).finally(()=>{setTimeout(()=>{var t;return L([...((t=r.current)==null?void 0:t.querySelectorAll("*"))??[],r.current])},1200),setTimeout(()=>{var t;return L([...((t=r.current)==null?void 0:t.querySelectorAll("*"))??[],r.current])},3e3)})}catch(t){console.error(`Error executing useEffect for ${Qe.prototype.constructor.name}:${t.message}`)}},[]),e.jsx("datalist",{id:"listTelPacCons",ref:r})}function We(){const r=m.useRef(null),a=m.useMemo(()=>[],[]);return m.useEffect(()=>{try{if(!(r.current instanceof HTMLDataListElement))throw g(r.current,"Validation of Datalist instance",h(new Error));K("patients","_table",!0).then(t=>{var l;if(t.forEach(n=>{!a.includes(n)&&a.push({name:n.name,tel:n.tel,email:n.email})}),!(r.current instanceof HTMLDataListElement))throw g(r.current,"Validation of Datalist instance",h(new Error));f[`${r.current.id}`]&&!f[`${r.current.id}`]._internalRoot?setTimeout(()=>{var n,o,c;try{if(!(r.current instanceof HTMLElement))throw g(r.current,"Validation of Datalist Reference",h(new Error));if(r.current.querySelector("option"))return;if((n=f[`${r.current.id}`])==null||n.unmount(),delete f[`${r.current.id}`],r.current.remove(),f[`${r.current.id}`]||(f[`${r.current.id}`]=A(r.current)),(o=f[`${r.current.id}`])==null||o.render(e.jsx(q,{FallbackComponent:()=>e.jsx(H,{message:"Error reloading replacement for data list"}),children:e.jsx(e.Fragment,{})})),r.current=document.getElementById("listEmailPacCons"),!(r.current instanceof HTMLElement))throw g(r.current,"Validation of replaced dl",h(new Error));f[`${r.current.id}`]||(f[`${r.current.id}`]=A(r.current)),r.current.querySelector("option")||(c=f[`${r.current.id}`])==null||c.render(a.map((d,p)=>e.jsx("option",{value:d.email,children:d.name},`email-pac__${p}`)))}catch(d){console.error(`Error executing scheduled rendering of Data List Content Replacement:
${d.message}`)}},1e3):f[`${r.current.id}`]=A(r.current),r.current.querySelector("tr")||(l=f[`${r.current.id}`])==null||l.render(a.map((n,o)=>e.jsx("option",{value:n.email,children:n.name},`email-pac__${o}`)))}).catch(t=>console.error(`Failed to fetch from Patients Table for filling First Name DL: ${t.message}`)).finally(()=>{setTimeout(()=>{var t;return L([...((t=r.current)==null?void 0:t.querySelectorAll("*"))??[],r.current])},1200),setTimeout(()=>{var t;return L([...((t=r.current)==null?void 0:t.querySelectorAll("*"))??[],r.current])},3e3)})}catch(t){console.error(`Error executing useEffect for ${We.prototype.constructor.name}:${t.message}`)}},[]),e.jsx("datalist",{id:"listEmailPacCons",ref:r})}let pe=0;function Ir({onClose:r}){const a=m.useContext(X).userClass,t=m.useRef(null),l=m.useRef(null),[n,o]=re(),c=m.useRef(null),d=m.useRef(null),p=m.useRef(null),v=m.useRef(null),w=m.useRef(null),D=m.useRef(null),C=m.useRef(null),I=m.useRef(null),F=m.useRef(null),u=m.useRef(null),y=m.useRef(null),[s,S]=m.useState(!1),T=()=>S(!s),[j,E]=m.useState(!1),N=(x=!1)=>E(!x),[R,G]=m.useState(!0),Y=(x=!1)=>G(!x),[W,Ge]=m.useState(!0),je=(x=!1)=>Ge(!x),ye=m.useCallback(x=>{var b;const i=(()=>{const $=new Map;return Object.entries(x).forEach(([P,k])=>{$.set(P,k)}),$})();if((t==null?void 0:t.current)instanceof Element){const $=t.current.querySelector("input[id*=cpf]")||t.current.querySelector("input[id*=CPF]"),P=Array.from([...t.current.querySelectorAll("input"),...t.current.querySelectorAll("select"),...t.current.querySelectorAll("textarea")]).filter(k=>!/cpf/gi.test(k.id));if($ instanceof HTMLInputElement&&P.length>0&&P.every(k=>k instanceof HTMLInputElement||k instanceof HTMLTextAreaElement||k instanceof HTMLSelectElement)){const k=i.get($.value.replaceAll(/[^\d]/g,""));for(const de of P){let M=de.dataset.title;M?(M.match(/[\s-_]/g)?(b=M.match(/[\s-_]/g))==null||b.forEach((Ar,Ke)=>{const Z=/[\s-_]/g.exec(M).index;Ke===0?M=M.slice(0,Z).toLowerCase()+M.charAt(Z+1).toUpperCase()+M.slice(Z+2).toLowerCase():M=M.slice(0,Z)+M.charAt(Z+1).toUpperCase()+M.slice(Z+2).toLowerCase()}):M=M.toLowerCase(),M=M.replaceAll(" ","").replaceAll("-","").replaceAll("_","").replaceAll(/D[aeo](?=[A-Z])/g,"").replaceAll(/[Pp]aciente/g,""),k[M]&&(de.value=k[M].toString())):console.warn(`Field ${de.id||"UNIDENTIFIED"} has no data-title. Could not match data.`)}}else Xe(h(new Error),`inputs in the dialog id ${t.current.id}`,$)}else console.warn("dlgRef.current not validated in callbackCPFPacBtnClick()");return i},[]),Ve=m.useCallback(()=>{(d==null?void 0:d.current)instanceof HTMLButtonElement&&d.current.id.match(/cpf/gi)?ye({12345678910:{primeiroNome:"José",sobrenome:"Pereira"},89832093256:{primeiroNome:"Maria",sobrenome:"Barreto"},32913903255:{primeiroNome:"Pedro",sobrenome:"Guedes"}}):g(d.current,"argument for handleCPFBtnClick",h(new Error))},[d,ye]),[le,se]=m.useState(!1),Je=m.useCallback((x,i)=>{(x==null?void 0:x.current)instanceof HTMLButtonElement?se(!i):g(x.current,"CPFProfBtnRef for useCallback",h(new Error))},[]),Ue=m.useCallback(x=>{const i=[...x.querySelectorAll("input"),...x.querySelectorAll("textarea"),...x.querySelectorAll("select")];i.length>0?i.forEach($=>{ve[`${($==null?void 0:$.id.replace(/first/gi,"").replace("Pac","").replace(/type/gi,"").replace(/sel/gi,"").toLowerCase())??"no-id"}`]=$.value||"Anônimo"}):$e(i,"allEntryEls in generateSchedBtn()",h(new Error)),fe.rootDlg||(fe.rootDlg=A(document.getElementById("rootDlgList")??document.getElementById("transfArea")));const b=ir(ve,Ce[pe],fe.rootDlg,a);dr(b,a)},[a]),[ce,ie]=m.useState(!1),ze=(x=!0)=>{t.current instanceof HTMLElement&&!Be(u.current,t.current,[void 0,x,ie,"Arraste"],a)&&ie(!x)};return m.useEffect(()=>(n.has("new-cons")||o({...Object.fromEntries(n),"new-cons":"open"}),n.get("av-pac")==="open"&&E(!0),n.get("av-prof")==="open"&&se(!0),()=>{const x=new URLSearchParams(n);x.delete("new-cons"),o(x)}),[n,o]),m.useEffect(()=>{(t==null?void 0:t.current)instanceof HTMLDialogElement?(t.current.showModal(),L([...t.current.querySelectorAll("*"),t.current])):g(t.current,"dialogElement in RegstPacDlg",h(new Error))},[t]),m.useEffect(()=>{oe(a,["coordenador"],document.getElementById("btnShowAvStuds"),document.getElementById("listCPFPacCons"),document.getElementById("autoFillDREBtn"),document.getElementById("autoFillCPFRespBtn"))},[t,a]),m.useEffect(()=>{if(t.current instanceof HTMLElement){setTimeout(()=>{var i;(i=t.current)==null||i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},300),J.globalDataProvider&&J.globalDataProvider.initPersist(t.current,J.globalDataProvider),He(t,!0),L([...t.current.querySelectorAll("*"),t.current]);const x=i=>{i.key==="Escape"&&r()};return addEventListener("keydown",x),()=>removeEventListener("keydown",x)}},[t,r]),m.useEffect(()=>{const x=i=>{t.current&&z(i,t.current).some(b=>b===!0)&&r()};return addEventListener("click",x),()=>removeEventListener("click",x)},[t,r]),m.useEffect(()=>{v.current instanceof HTMLInputElement&&(v.current.type==="checkbox"||v.current.type==="radio")?(v.current.checked=!0,je(W)):B(v.current,"Switch for toggling autofill in new appointment form",h(new Error))},[v]),m.useEffect(()=>{p.current instanceof HTMLInputElement&&(p.current.type==="checkbox"||p.current.type==="radio")?(p.current.checked=!0,Y(R)):B(p.current,"Switch for toggling autocorrect in new appointment form",h(new Error))},[p]),m.useEffect(()=>{try{if(!(C.current instanceof HTMLInputElement))throw B(C.current,"Validation of Appointment Hour Ref",h(new Error));C.current.value="18:00"}catch(x){console.error(`Error executing useEffect for hourRef:
${x.message}`)}},[C]),m.useEffect(()=>{try{if(!(I.current instanceof HTMLElement))throw g(I.current,"Validation of Day Reference",h(new Error));const x=document.getElementById("changeDaySel");if(!(x instanceof HTMLElement))throw g(x,"Validation of Change Day Reference",h(new Error));I.current.innerHTML=x.parentElement.innerHTML.replaceAll("Dia de Inclusão","Dia").replaceAll("changeDaySel","consChangeDaySel")}catch(x){console.error(`Error executing useEffect for dayRef:
${x.message}`);const i=document.getElementById("consTimeDiv");i instanceof HTMLElement&&(i.style.display="none")}},[I]),ur("formDlgExporter",t.current,!0),m.useEffect(()=>Fe(y.current)),e.jsxs("dialog",{className:"modal-content flexWC",ref:t,id:"regstPacDlg",children:[e.jsxs(q,{FallbackComponent:()=>e.jsx(te,{renderError:new Error("Erro carregando a janela modal!"),onClick:r}),children:[e.jsxs("div",{role:"group",className:"flexRNoWBetCt cGap2v widQ600_75v rGapQ4601v",id:"headRegstPac",children:[e.jsxs("div",{role:"group",className:"flexNoW flexQ750NoWC cGap1v rGapQ4601v",style:{marginLeft:"0.5rem",marginTop:"1rem"},children:[e.jsx("h2",{className:"mg-1b noInvert",children:e.jsx("strong",{className:"noInvert",children:"Registro de Consulta"})}),e.jsxs("span",{role:"group",className:"form-switch spanRight mg-0b mg-07t pdT05v pdL-3-2rQ750",id:"autocorrectDivCons",children:[e.jsx("input",{type:"checkbox",className:"deActBtn form-check-input",role:"switch",id:"deactAutocorrectBtnCons",title:"Correção automática de Nomes","data-title":"Autocorreção(Consulta)",ref:p,onChange:()=>Y(R)}),e.jsx("strong",{children:"Autocorreção"})]}),e.jsxs("span",{role:"group",className:"form-switch spanRight mg-0b mg-07t padR5v pdT05v",id:"autofillDivCons",children:[e.jsx("input",{type:"checkbox",className:"deActBtn form-check-input",role:"switch",id:"deactAutofilltBtnCons",title:"Correção automática de CPF, Telefone e E-mail","data-title":"Autopreenchimento(Consulta)",ref:v,onChange:()=>je(W)}),e.jsx("strong",{children:"Autopreenchimento"})]})]}),e.jsx("button",{className:"btn btn-close forceInvert mg-30b600Q",onClick:r})]}),e.jsxs("fieldset",{className:"flexNoWC",children:[e.jsx("hr",{}),e.jsxs("form",{ref:y,className:"flexWC",id:"bodyRegsPac",name:"cons_form",action:"submit_cons_form",method:"post",encType:"application/x-www-form-urlencoded",onSubmit:x=>x.preventDefault(),children:[e.jsxs("section",{className:"flexWC",id:"inpsRegsPacSec",children:[e.jsx("div",{role:"group",className:"flexWR",id:"cpfPacDiv",children:e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100",id:"cpfTitledInpDiv",children:[e.jsx("label",{className:"stLab",id:"hCpfPac",htmlFor:"inpCPFPac",children:"CPF do Paciente:"}),e.jsxs("div",{role:"group",className:"flexNoWRSwitch cGap5",id:"cpfBodyDiv",children:[e.jsx("input",{type:"text",id:"inpCPFPac",name:"CPFPac-in",list:"listCPFPacCons",maxLength:16,pattern:"^(\\d{3}\\.?\\d{3}\\.?\\d{3}-?\\d{2})$",className:"form-control d-ibl noInvert ssPersist",placeholder:"Preencha com o CPF",autoComplete:"username","data-title":"CPF Paciente","data-aloc":"cpf-pac",ref:c,onInput:x=>{W&&Ye(x.currentTarget),Q(x.currentTarget,{min:14,max:16,pattern:["^(d{3}.){2}d{3}-d{2}$",""]}),Ze(x.currentTarget,x.currentTarget.value)}}),e.jsx(Oe,{}),e.jsx("span",{className:"hovBlock",children:e.jsx("button",{type:"button",formMethod:"get",formAction:"#",className:"btn btn-primary hBsFormLike",id:"autoFillCPFPacBtn",ref:d,onClick:Ve,children:e.jsx("small",{role:"textbox",children:"Preencher Dados com CPF"})})})]})]})}),e.jsxs("div",{role:"group",className:"flexWR",id:"firstNameDiv",children:[e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100 noInvert",id:"firstNameDiv",children:[e.jsx("label",{className:"stLab noInvert",id:"hFirstName",htmlFor:"firstNamePac",children:"Primeiro Nome:"}),e.jsxs("div",{role:"group",className:"flexNoWRSwitch cGap5",id:"firstNamePacBody",children:[e.jsx("input",{type:"text",list:"listFirstNameCons",maxLength:99,placeholder:"Preencha com o Primeiro Nome do Paciente",className:"form-control ssPersist",id:"firstNamePac",name:"NamePac-in",autoComplete:"given-name",autoCapitalize:"true","data-title":"Primeiro Nome Paciente","data-aloc":"firstname-pac",onInput:x=>{if(window&&localStorage.setItem("name",x.currentTarget.value),Q(x.currentTarget,{min:3,max:99,pattern:["[^0-9]","gi"]}),R&&we(x.currentTarget,R),x.currentTarget.value.length>2){try{const i=document.getElementById("familyNamePac");if(!(i instanceof HTMLInputElement))throw B(i,"Validation of familyNamePac",h(new Error));i.required||(i.minLength=3,i.dataset.min="3",i.dataset.max="99",i.dataset.pattern="[^0-9]",i.dataset.flags="gi",i.required=!0)}catch(i){console.error(`Error executing procedure for familyNamePac:
${i.message}`)}try{const i=document.getElementById("inpTelPac");if(!(i instanceof HTMLInputElement))throw B(i,"Validation of inpTelPac",h(new Error));i.required||(i.minLength=8,i.dataset.min="8",i.dataset.max="10",i.dataset.pattern="9?d{4}-d{4}",i.dataset.flags="g",i.required=!0)}catch(i){console.error(`Error executing procedure for inpTelPac:
${i.message}`)}try{const i=document.getElementById("relProfName");if(!(i instanceof HTMLInputElement))throw B(i,"Validation of relProfName",h(new Error));i.required||(i.minLength=3,i.dataset.min="3",i.dataset.max="99",i.dataset.pattern="[^0-9]",i.dataset.flags="gi",i.required=!0)}catch(i){console.error(`Error executing procedure for relProfName:
${i.message}`)}}else{try{const i=document.getElementById("familyNamePac");if(!(i instanceof HTMLInputElement))throw B(i,"Validation of familyNamePac",h(new Error));i.required&&(i.minLength=0,delete i.dataset.min,delete i.dataset.max,delete i.dataset.pattern,delete i.dataset.flags,i.required=!1)}catch(i){console.error(`Error executing procedure for familyNamePac:
${i.message}`)}try{const i=document.getElementById("inpTelPac");if(!(i instanceof HTMLInputElement))throw B(i,"Validation of inpTelPac",h(new Error));i.required&&(i.minLength=0,delete i.dataset.min,delete i.dataset.max,delete i.dataset.pattern,delete i.dataset.flags,i.required=!1)}catch(i){console.error(`Error executing procedure for inpTelPac:
${i.message}`)}try{const i=document.getElementById("relProfName");if(!(i instanceof HTMLInputElement))throw B(i,"Validation of relProfName",h(new Error));i.required&&(i.minLength=0,delete i.dataset.min,delete i.dataset.max,delete i.dataset.pattern,delete i.dataset.flags,i.required=!1)}catch(i){console.error(`Error executing procedure for relProfName:
${i.message}`)}}}}),e.jsx(Ee,{first:!0}),e.jsx("button",{type:"button",id:"btnShowAvStuds",className:"btn btn-primary hBsFormLike forceInvert",formMethod:"get",formAction:"#",ref:l,onClick:()=>N(j),children:e.jsx("small",{role:"textbox",children:"Consultar Lista de Pacientes"})})]})]}),j&&e.jsx(wr,{dispatch:E,state:j,mainDlgRef:t,shouldShowAlocBtn:!0})]}),e.jsxs("div",{role:"group",className:"flexWR noInvert",id:"familyNameDiv",children:[e.jsx("label",{className:"stLab",id:"hFamilyName",htmlFor:"familyNamePac",children:"Sobrenome(s):"}),e.jsx("input",{type:"text",maxLength:99,placeholder:"Preencha com Sobrenome(s) do Paciente",className:"form-control autocorrectAll ssPersist",id:"familyNamePac",list:"listFamilyNameCons",autoComplete:"family-name",autoCapitalize:"true","data-title":"Sobrenome Paciente","data-aloc":"familyname-pac",onInput:x=>{window&&localStorage.setItem("secondName",x.currentTarget.value),R&&we(x.currentTarget,R),Q(x.currentTarget,{min:3,max:99,pattern:["[^0-9]","gi"]})}}),e.jsx(Ee,{first:!1})]}),e.jsx("div",{role:"group",className:"flexWR cGap5",id:"telPacDiv",children:e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100",id:"telTitledInpDiv",children:[e.jsx("label",{className:"stLab",id:"hTelPac",htmlFor:"inpTelPac",children:"Telefone do Paciente:"}),e.jsxs("div",{role:"group",className:"flexNoWR cGap1v",id:"telBodyDiv",children:[e.jsx("input",{type:"number",id:"nacPac",maxLength:4,pattern:"^+?\\d{2}$",className:"form-control d-ibl tel-national noInvert ssPersist",placeholder:"+55?",autoComplete:"tel-national","data-title":"Código Nacional Paciente","data-aloc":"nac-pac",onInput:x=>{Q(x.currentTarget,{min:2,max:4,pattern:["^+?d{2}$",""]})}}),e.jsx("input",{type:"number",id:"DDDPac",list:"ddds",maxLength:5,pattern:"^\\(?\\d{2}\\)?$",className:"form-control d-ibl noInvert ssPersist",placeholder:"DDD",autoComplete:"tel-area-code","data-title":"DDD Paciente","data-aloc":"ddd-pac",onInput:x=>{Q(x.currentTarget,{min:2,max:5,pattern:["^(?d{2})?$",""]})}}),e.jsxs("datalist",{id:"ddds",children:[e.jsxs("optgroup",{label:"Sudeste",children:[e.jsx("option",{value:"21",children:"RJ"}),e.jsx("option",{value:"11",children:"SP"}),e.jsx("option",{value:"12",children:"SP"}),e.jsx("option",{value:"13",children:"SP"}),e.jsx("option",{value:"14",children:"SP"}),e.jsx("option",{value:"15",children:"SP"}),e.jsx("option",{value:"16",children:"SP"}),e.jsx("option",{value:"17",children:"SP"}),e.jsx("option",{value:"18",children:"SP"}),e.jsx("option",{value:"31",children:"MG"}),e.jsx("option",{value:"32",children:"MG"}),e.jsx("option",{value:"33",children:"MG"}),e.jsx("option",{value:"34",children:"MG"}),e.jsx("option",{value:"35",children:"MG"}),e.jsx("option",{value:"37",children:"MG"}),e.jsx("option",{value:"38",children:"MG"}),e.jsx("option",{value:"27",children:"ES"}),e.jsx("option",{value:"28",children:"ES"})]}),e.jsxs("optgroup",{label:"Sul",children:[e.jsx("option",{value:"41",children:"PR"}),e.jsx("option",{value:"42",children:"PR"}),e.jsx("option",{value:"43",children:"PR"}),e.jsx("option",{value:"44",children:"PR"}),e.jsx("option",{value:"45",children:"PR"}),e.jsx("option",{value:"46",children:"PR"}),e.jsx("option",{value:"47",children:"SC"}),e.jsx("option",{value:"48",children:"SC"}),e.jsx("option",{value:"49",children:"SC"}),e.jsx("option",{value:"51",children:"RS"}),e.jsx("option",{value:"53",children:"RS"}),e.jsx("option",{value:"54",children:"RS"}),e.jsx("option",{value:"55",children:"RS"})]}),e.jsxs("optgroup",{label:"Centro-Oeste",children:[e.jsx("option",{value:"61",children:"DF"}),e.jsx("option",{value:"62",children:"GO"}),e.jsx("option",{value:"64",children:"GO"}),e.jsx("option",{value:"65",children:"MT"}),e.jsx("option",{value:"66",children:"MT"}),e.jsx("option",{value:"67",children:"MS"})]}),e.jsxs("optgroup",{label:"Nordeste",children:[e.jsx("option",{value:"71",children:"BA"}),e.jsx("option",{value:"73",children:"BA"}),e.jsx("option",{value:"74",children:"BA"}),e.jsx("option",{value:"75",children:"BA"}),e.jsx("option",{value:"77",children:"BA"}),e.jsx("option",{value:"79",children:"SE"}),e.jsx("option",{value:"81",children:"PE"}),e.jsx("option",{value:"87",children:"PE"}),e.jsx("option",{value:"82",children:"AL"}),e.jsx("option",{value:"83",children:"PB"}),e.jsx("option",{value:"84",children:"RN"}),e.jsx("option",{value:"85",children:"CE"}),e.jsx("option",{value:"88",children:"CE"}),e.jsx("option",{value:"86",children:"PI"}),e.jsx("option",{value:"89",children:"PI"}),e.jsx("option",{value:"98",children:"MA"}),e.jsx("option",{value:"99",children:"MA"})]}),e.jsxs("optgroup",{label:"Norte",children:[e.jsx("option",{value:"91",children:"PA"}),e.jsx("option",{value:"93",children:"PA"}),e.jsx("option",{value:"94",children:"PA"}),e.jsx("option",{value:"92",children:"AM"}),e.jsx("option",{value:"97",children:"AM"}),e.jsx("option",{value:"95",children:"RR"}),e.jsx("option",{value:"96",children:"AP"}),e.jsx("option",{value:"63",children:"TO"}),e.jsx("option",{value:"69",children:"RO"}),e.jsx("option",{value:"68",children:"AC"})]})]}),e.jsx("input",{type:"tel",id:"inpTelPac",list:"listTelPacCons",maxLength:10,pattern:"^\\d{4,5}-?\\d{4}$",className:"form-control d-ibl noInvert ssPersist",placeholder:"Preencha com o Telefone (sem código nacional e DDD) de Contato",autoComplete:"tel-local","data-title":"Tel Paciente","data-aloc":"tel-pac",ref:w,onInput:x=>{W&&er(x.currentTarget),Q(x.currentTarget,{min:8,max:10,pattern:["9?d{4}-d{4}","g"]})}}),e.jsx(Qe,{})]})]})}),e.jsxs("div",{role:"group",className:"flexWR",id:"emailPacDiv",children:[e.jsx("label",{className:"stLab",id:"hFirstName",htmlFor:"emailPac",children:"E-mail do Paciente:"}),e.jsx("input",{type:"email",maxLength:99,placeholder:"Preencha com o E-mail do Paciente",className:"form-control noInvert ssPersist",id:"emailPac",list:"listEmailPacCons",name:"emailPac-in",autoComplete:"email","data-title":"Email Paciente","data-aloc":"email-pac",onInput:x=>{W&&Te(x.currentTarget),Q(x.currentTarget,{min:6,max:99,pattern:["@","g"]})},onClick:x=>W&&Te(x.currentTarget)}),e.jsx(We,{})]}),e.jsxs("div",{role:"group",className:"flexWR",id:"statusPacDiv",children:[e.jsx("label",{className:"stLab",id:"hStatusPac",htmlFor:"statusPac",children:"Status do Paciente:"}),e.jsxs("select",{className:"form-select noInvert ssPersist",id:"statusPac",name:"statusPac-in","data-title":"Status Paciente","data-aloc":"status-pac",required:!0,children:[e.jsx("option",{value:"avaliacao",children:"Em Avaliação Inicial"}),e.jsx("option",{value:"tratamento",children:"Em Tratamento Geral"}),e.jsx("option",{value:"emergência",children:"Em emergência"}),e.jsx("option",{value:"altaOdontologia",children:"Alta — Odontologia"}),e.jsx("option",{value:"altaEducacaoFisica",children:"Alta — Educação Física"}),e.jsx("option",{value:"altaNutricao",children:"Alta — Nutrição"}),e.jsx("option",{value:"altaOdontologiaEducaoFisica",children:"Alta — Odontologia — Educação Física"}),e.jsx("option",{value:"altaOdontologiaNutricao",children:"Alta — Odontologia — Nutrição"}),e.jsx("option",{value:"altaEducaoFisicaNutricao",children:"Alta — Educação Física — Nutrição"}),e.jsx("option",{value:"altaOdontologiaEducacaoFisicaNutricao",children:"Alta Geral"})]})]}),e.jsxs("div",{role:"group",className:"flexWR noInvert",id:"consDiv",children:[e.jsx("label",{className:"stLab",id:"hTypeCons",htmlFor:"typeConsSel",children:"Tipo da Consulta:"}),e.jsxs("select",{id:"typeConsSel",name:"typeCons-in",className:"form-select ssPersist","data-title":"Tipo da Consulta",required:!0,children:[e.jsxs("optgroup",{label:"Geral",children:[e.jsx("option",{value:"anamnese",children:"Anamnese e Exame Clínico"}),e.jsx("option",{value:"retorno",children:"Retorno e Reavaliação"})]}),e.jsxs("optgroup",{label:"Odontologia",children:[e.jsx("option",{value:"exodontia",children:"Exodontia"}),e.jsx("option",{value:"profilaxia",children:"Profilaxia e Orientação"}),e.jsx("option",{value:"raspagem",children:"Raspagem"}),e.jsx("option",{value:"rcarie",children:"Remoção de Cárie"})]}),e.jsxs("optgroup",{label:"Educação Física & Nutrição",children:[e.jsx("option",{value:"acompanhamento",children:"Acompanhamento Geral"}),e.jsx("option",{value:"analise",children:"Análise de Exames Bioquímico"}),e.jsx("option",{value:"diagnostico",children:"Diagnóstico Nutricional"}),e.jsx("option",{value:"avaliacao",children:"Avaliação Antropométrica"}),e.jsx("option",{value:"recordatorio",children:"Recordatório Alimentar"}),e.jsx("option",{value:"suplementacao",children:"Suplementação e Plano Alimentar"})]}),e.jsx("optgroup",{label:"Psicanálise"})]})]}),e.jsxs("div",{role:"group",className:"flexWR",id:"relStudDiv",children:[e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100",id:"alocStudTitledDiv",children:[e.jsx("label",{className:"stLab",id:"hRelStud",htmlFor:"alocStudDiv",children:"Estudante alocado:"}),e.jsxs("div",{role:"group",className:"flexNoWRSwitch cGap5",id:"alocStudDiv",children:[e.jsx("input",{type:"text",id:"relStudName",name:"relStud-in",list:"avStuds",className:"form-control noInvert ssPersist",maxLength:99,placeholder:"Preencha com o Nome do Estudante alocado",autoComplete:"given-name","data-title":"Nome do Estudante Alocado",onInput:x=>{Q(x.currentTarget,{min:3,max:99,pattern:["[^0-9]","gi"]})}}),e.jsxs("datalist",{id:"avStuds",children:[e.jsx("span",{children:"Registro de Estudantes"}),e.jsx(O,{grp:"studs",area:"Odontologia"}),e.jsx(O,{grp:"studs",area:"Educação Física"}),e.jsx(O,{grp:"studs",area:"Nutrição"}),e.jsx(O,{grp:"studs",area:"Medicina"}),e.jsx(O,{grp:"studs",area:"Psicologia"})]}),e.jsx("button",{type:"button",formMethod:"get",formAction:"#",className:"btn btn-primary hBsFormLike",id:"autoFillDREBtn",onClick:()=>T(),children:e.jsx("small",{role:"textbox",children:"Capturar por Identificadores"})})]})]}),s&&e.jsx(Cr,{forwardedRef:t}),e.jsxs("div",{role:"group",className:"flexNoWC flexBasis100",id:"respTitledInpDiv",children:[e.jsx("label",{className:"stLab",id:"hRelResp",htmlFor:"relProfName",children:"Professor ou Profissional Responsável alocado:"}),e.jsxs("div",{role:"group",className:"flexNoWRSwitch cGap5",id:"respBodyDiv",children:[e.jsx("input",{type:"text",id:"relProfName",name:"relProf-in",list:"avProfs",className:"form-control noInvert ssPersist",maxLength:99,placeholder:"Preencha com o Nome do Profissional Responsável alocado",autoComplete:"given-name","data-title":"Nome do Profissional Responsável Alocado",onInput:x=>{Q(x.currentTarget,{min:3,max:99,pattern:["[^0-9]","gi"]})}}),e.jsxs("datalist",{id:"avProfs",children:[e.jsx("span",{children:"Registro de Profissionais"}),e.jsx(O,{grp:"profs",area:"Odontologia"}),e.jsx(O,{grp:"profs",area:"Educação Física"}),e.jsx(O,{grp:"profs",area:"Nutrição"}),e.jsx(O,{grp:"profs",area:"Medicina"}),e.jsx(O,{grp:"profs",area:"Psicologia"})]}),e.jsx("button",{type:"button",className:"btn btn-primary hBsFormLike",id:"autoFillCPFRespBtn",ref:D,onClick:()=>Je(D,le),children:e.jsx("small",{role:"textbox",children:"Consultar Lista de Profissionais"})})]})]}),le&&e.jsx(Tr,{dispatch:se,state:le,mainDlgRef:t,btnProf:d.current})]}),e.jsxs("div",{role:"group",className:"flexWR gapped1v flexAlItCt noInvert",id:"confirmPacDiv",children:[e.jsx("label",{className:"stLab checkGreen mdGreen",id:"hConfirmPac",htmlFor:"confirmPac",children:"Paciente Confirmado:"}),e.jsx("input",{type:"checkbox",id:"confirmPac",name:"check-in",className:"form-check-input mg-09t mg-1-3b","data-title":"Confirmação do Paciente"})]}),e.jsxs("div",{role:"group",id:"consTimeDiv",children:[e.jsx("div",{id:"consDayDiv",ref:I}),e.jsxs("div",{role:"group",className:"widQ460MinFull alSfSt widHalf900Q rGapQ900null",id:"hourDayDiv",children:[e.jsx("label",{className:"boldLabel mg-09t",id:"labHourDay",htmlFor:"consHourDayInp",children:"Horário:"}),e.jsx("input",{type:"time",className:"form-control widMin75Q460v ssPersist",id:"consHourDayInp",title:"Selecione aqui o horário na agenda (só funcionará para horários tabelados)","data-title":"Horário de trabalho para Inclusão",ref:C,onInput:x=>{try{const i=Array.from(document.querySelectorAll(".hour")).map(b=>b instanceof HTMLElement?b.dataset.hour||b.innerText:null).filter(b=>typeof b=="string");i.some(b=>b===x.currentTarget.value)?(x.currentTarget.style.color="rgb(33, 37, 41)",x.currentTarget.style.borderColor="rgb(179, 205, 242)"):(x.currentTarget.style.color="#c10f0fd8",x.currentTarget.style.borderColor="#c10f0fd8",setTimeout(()=>{const b=document.getElementById("consHourDayInp");if(b instanceof HTMLInputElement||b instanceof HTMLSelectElement){b.style.borderColor="rgb(179, 205, 242)";const $=i.map(P=>P.slice(0,2));if($.some(P=>b.value===P)){const P=$.find(k=>b.value===k);P&&P.length===2&&(b.value=`${P}:00`,b.style.color="rgb(33, 37, 41)")}else parseInt(b.value.replace(":",""))>(parseInt(i.at(-1).replace(":",""))||21)?(b.value=`${parseInt(i.at(-1).slice(0,2))}:00`,b.style.color="rgb(33, 37, 41)"):parseInt(b.value.slice(0,2))<(parseInt(i[0].replace(":",""))||18)&&(b.value=`${parseInt(i[0].slice(0,2))}:00`,b.style.color="rgb(33, 37, 41)")}},1e3))}catch(i){console.error(`Error executing ${x.type} callback:
${i.message}`)}},onChange:x=>{try{const i=Array.from(document.querySelectorAll(".hour")).map(b=>b instanceof HTMLElement?b.dataset.hour||b.innerText:null).filter(b=>typeof b=="string");i.some(b=>b===x.currentTarget.value)?(x.currentTarget.style.color="rgb(33, 37, 41)",x.currentTarget.style.borderColor="rgb(179, 205, 242)"):(x.currentTarget.style.color="#c10f0fd8",x.currentTarget.style.borderColor="#c10f0fd8",setTimeout(()=>{const b=document.getElementById("consHourDayInp");if(b instanceof HTMLInputElement||b instanceof HTMLSelectElement){b.style.borderColor="rgb(179, 205, 242)";const $=i.map(P=>P.slice(0,2));if($.some(P=>b.value===P)){const P=$.find(k=>b.value===k);P&&P.length===2&&(b.value=`${P}:00`,b.style.color="rgb(33, 37, 41)")}else parseInt(b.value.replace(":",""))>(parseInt(i.at(-1).replace(":",""))||21)?(b.value=`${parseInt(i.at(-1).slice(0,2))}:00`,b.style.color="rgb(33, 37, 41)"):parseInt(b.value.slice(0,2))<(parseInt(i[0].replace(":",""))||18)&&(b.value=`${parseInt(i[0].slice(0,2))}:00`,b.style.color="rgb(33, 37, 41)")}},1e3))}catch(i){console.error(`Error executing ${x.type} callback:
${i.message}`)}}})]})]}),e.jsxs("div",{role:"group",className:"flexWR gapped1v flexAlItCt noInvert",children:[e.jsx("label",{htmlFor:"notesCons",className:"bolded",children:"Notas:"}),e.jsx("textarea",{className:"form-control",id:"notesCons",name:"notes-in",autoCapitalize:"true",placeholder:"Insira aqui observações adicionais sobre a consulta","data-title":"Notas e Observações"})]})]}),e.jsx("hr",{}),e.jsxs("section",{className:"flexNoWR cGap5 rGapQ4602v flexJC flexQ460NoWC",id:"btnsRegsPacSec",children:[e.jsx("div",{role:"group",className:"flexWR flexAlItCt flexJSb widHalf widQ460MinFull noInvert",id:"divSubmitPac",children:e.jsx("button",{type:"button",id:"submitPacBtn",className:"btn btn-success widFull",ref:u,onClick:x=>{Me(x,x.currentTarget,!1).then(i=>{pe=document.querySelectorAll(".appointmentBtn").length+1,Ce[pe]=mr(t.current??x.currentTarget.closest("dialog")),Ue(t.current??x.currentTarget.closest("dialog")),ze(ce),r()})},children:e.jsx("small",{role:"textbox",children:e.jsx("em",{children:e.jsx("strong",{children:"Finalizar"})})})})}),e.jsx("div",{role:"group",className:"flexWR flexAlItCt flexJSb widHalf widQ460MinFull",id:"divExportPac",children:e.jsx("button",{type:"button",id:"btnExportRegst",className:"btn btn-primary widFull","data-active":"false",ref:F,title:"Gere um .xlsx com os dados preenchidos",onClick:x=>{var i,b,$;ue.formDlgExporter||(ue.formDlgExporter=new Re),ue.formDlgExporter.handleExportClick(x,"registroDeConsultaParaPaciente",x.currentTarget.closest("form")??document,`${((i=localStorage.getItem("name"))==null?void 0:i.replace(/\s/g,"-"))??""}_${((b=localStorage.getItem("secondName"))==null?void 0:b.replace(/\s/g,"-"))??""}_${(($=localStorage.getItem("lastName"))==null?void 0:$.replace(/\s/g,"-"))??""}`),new AbortController().signal},children:e.jsx("small",{role:"textbox",children:e.jsx("em",{className:"bolded",children:"Gerar Planilha"})})})})]})]})]})]}),ce&&e.jsx(_e,{setDisplayFailRegstDlg:ie,shouldDisplayFailRegstDlg:ce,root:void 0,secondOp:"Arraste"})]})}function Pe({mainRoot:r}){const a=[1,2,3,4,5,6,7,8,9],t=[18,19,20,21],l=m.useContext(X).userClass,n=()=>{(innerWidth===900||innerWidth===600||innerWidth===460)&&Se([...document.querySelectorAll(".form-padded"),...document.querySelectorAll(".ovFlAut"),...document.querySelectorAll("[scrollbar-width=none]"),...document.querySelectorAll("table")],[!0,1],!0,[document.getElementById("formBodySchedSect")])},[o]=m.useState(!0),c=m.useRef(null),d=m.useRef(null),p=m.useRef(null),v=m.useRef(null),[w,D]=m.useState(!1),[C]=re(),I=()=>D(()=>!w),F=m.useCallback(u=>{if(u instanceof HTMLFormElement){const s=u.querySelector("#regstDayBtn");s instanceof HTMLButtonElement?s.disabled=!0:g(s,"Button for completing day of appointment in schedule form",h(new Error));const S=u.querySelectorAll('input[class*="apptCheck"]');S.length>0?S.forEach(E=>{(l==="coordenador"||l==="supervisor")&&E.addEventListener("change",()=>{E instanceof HTMLInputElement&&(E.type==="checkbox"||E.type==="radio")?fr(E):B(E,`dayCheck id ${(E==null?void 0:E.id)||"UNIDENTIFIED"}`,h(new Error))})}):$e(S,"Checkboxes for day checks",h(new Error));const T=v.current||u.querySelector("#btnExport");T instanceof HTMLButtonElement?rr(u):g(T,"Button for generating spreadsheet in schedule form",h(new Error)),tr(Array.from(u.querySelectorAll('input[type="date"]'))),ar([...Array.from(u.querySelectorAll("input")).filter(E=>E.type==="text"||E.type==="number"||E.type==="date"||E.type==="search"||E.type==="hour"),...u.querySelectorAll("select"),...u.querySelectorAll("textarea")]),setTimeout(()=>{const E=u.querySelectorAll('[class*="ancestorTwins"]');E.length>0&&E.forEach(N=>{nr(N.querySelectorAll('[class*="flexTwin"]'),[["height","px"]])})},300);const j=u.querySelector("#hourDayInp")??u.querySelector('input[type="hour"]');j instanceof HTMLInputElement&&j.type==="time"?j.value="18:00":B(j,"hourInp in form for schedule",h(new Error))}else g(u,"formRef for callbackFormSchedule()",h(new Error));Se([...document.querySelectorAll(".form-padded"),...document.querySelectorAll(".ovFlAut"),...document.querySelectorAll("[scrollbar-width=none]"),...document.querySelectorAll("table")],[!0,1],!0,[document.getElementById("formBodySchedSect")]);const y=document.getElementById("mainConsDaysCont");return y instanceof HTMLElement?y.outerHTML:setTimeout(()=>{const s=document.getElementById("mainConsDaysCont");s instanceof HTMLElement&&s.outerHTML},200),addEventListener("resize",n),()=>removeEventListener("resize",n)},[l]);return m.useEffect(()=>{C.has("new-cons")&&D(!0)},[C]),m.useEffect(()=>{if((c==null?void 0:c.current)instanceof HTMLElement){F(c.current),L([...c.current.querySelectorAll("*"),c.current]),J.globalDataProvider&&J.globalDataProvider.initPersist(c.current,J.globalDataProvider,l);const u=setInterval(()=>{try{if(!(c.current instanceof HTMLFormElement))throw g(c.current,"Validation of Form instance",h(new Error));Me(c.current,c.current).then(y=>or("schedule",y[2],!0))}catch(y){console.error(`Error executing interval for saving schedule at ${new Date().getMinutes()}:
${y.message}`)}},6e4);return()=>clearInterval(u)}else g(c.current,`formRef for useEffect() in ${Pe.name}`,h(new Error))},[c,F,l]),m.useEffect(()=>{if((d==null?void 0:d.current)instanceof HTMLElement&&d.current.id.match(/working/gi)){const u=d.current.querySelector("#toggleAutofillMonth")||d.current.querySelector('input[type="checkbox"]');u instanceof HTMLInputElement&&(u.type==="checkbox"||u.type==="radio")?(u.checked=!0,_.isAutoFillMonthOn=!0):B(u,"Input for toggling autofill in working month",h(new Error));const y=document.getElementById("firstWorkingDay"),s=document.getElementById("secondWorkingDay");(y instanceof HTMLSelectElement||y instanceof HTMLInputElement)&&(y.value="Quarta-feira"),(s instanceof HTMLSelectElement||s instanceof HTMLInputElement)&&(s.value="Sexta-feira")}else g(d.current,"workingDefinitionsRef.current in useEffect()",h(new Error))},[d]),m.useEffect(()=>{if(c.current instanceof HTMLFormElement&&(p==null?void 0:p.current)instanceof HTMLSelectElement){const u=Array.from(c.current.querySelectorAll(".dayTabRef")),[y]=ne(u,document.getElementById("monthSelector"),_.isAutoFillMonthOn,!0);lr(u,y),hr(Array.from(document.querySelectorAll(".dayTabRef")),document.getElementById("changeDaySel"),l)}else B(p.current,`monthRef in useEffect()
        parentForm present: ${c instanceof HTMLFormElement}`,h(new Error))},[p,l]),m.useEffect(()=>{var u;if(me.acc===0){const y=((u=document.getElementById("tbSchedule"))==null?void 0:u.innerHTML)||e.jsx(H,{message:"Erro obtendo Tabela de Agenda"});["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].forEach(s=>{he[s]=y,pr(s),xr(p.current||document.getElementById("monthSelector"))}),me.acc=me.acc++}c.current instanceof HTMLElement&&(oe(l,["supervisor","coordenador"],document.getElementById("confirmDayInp"),...document.querySelectorAll(".apptCheck"),...document.querySelectorAll(".eraseAptBtn")),oe(l,["coordenador"],document.getElementById("firstWorkingDay"),document.getElementById("secondWorkingDay"),document.getElementById("btnResetTab"),...document.querySelectorAll(".dayTabRef")))},[c,l]),m.useEffect(()=>{const u=setInterval(j=>{var N;const E=document.getElementById("confirmDayInp");if(!(E instanceof HTMLInputElement)){clearInterval(j);return}(N=document.getElementById("transfArea"))!=null&&N.querySelector(".appointmentBtn")?E.disabled=!1:E.disabled=!0},200),y=setInterval(j=>{var N;const E=document.getElementById("regstDayBtn");if(!(E instanceof HTMLButtonElement)){clearInterval(j);return}(N=document.getElementById("transfArea"))!=null&&N.querySelector(".appointmentBtn")?E.disabled=!1:E.disabled=!0},200),s=[],S=[];let T;[...document.querySelectorAll(".apptCheck"),...document.querySelectorAll(".eraseAptBtn")].forEach(j=>{const E=setInterval(N=>{var R;if(!(j instanceof HTMLButtonElement||j instanceof HTMLInputElement)||!(l==="coordenador"||l==="supervisor")){clearInterval(N);return}(R=j.closest(".consSlot"))!=null&&R.querySelector(".appointmentBtn")?j.disabled=!1:j.disabled=!0},200);s.push(E)}),document.querySelectorAll(".consSlot").forEach(j=>{const E=setInterval(()=>{if(!j.querySelector(".appointmentBtn")&&!j.querySelector(".slotableDay")){const N=document.createElement("input");N.classList.add("transparent-el","slotableDay","opaque-bluish","wid100","form-control"),N.id=j.id.replace("slot",""),N.placeholder="Horário Livre",N.ariaPlaceholder="Horário Livre",N.style.minWidth="21ch",N.ariaHidden="false",N.ariaRequired="false",N.ariaInvalid="false",j.prepend(N)}},200);S.push(E)});try{const j=document.getElementById("transfArea");if(!(j instanceof HTMLElement))throw g(j,"Transference Element",h(new Error));T=setInterval(()=>{if(!j.querySelector(".appointmentBtn")){const E=j.querySelector("slot");if(E)E.innerText===""&&(E.innerText="Área de transferência");else{const N=document.createElement("slot");N.classList.add("opaqueEl","ssPersist"),N.id="replaceSlot",N.title="Aqui é incluído o botão de uma consulta recém-criada",N.ariaHidden="false",N.innerText="Área de transferência",j.prepend(N)}}},200)}catch(j){console.error(`Error executing procedure for adding interval to Transference Area:
${j.message}`)}return()=>{try{clearInterval(u),clearInterval(y);for(const j of s)clearInterval(j);for(const j of S)clearInterval(j);document.getElementById("transfArea")&&T&&clearInterval(T)}catch(j){console.error(`Error clearing intervals for Schedule:
${j.message}`)}}},[l]),m.useEffect(()=>Fe(c.current)),e.jsx(q,{FallbackComponent:()=>e.jsx(H,{message:"Erro carregando agenda!"}),children:o&&e.jsxs("div",{role:"group",className:"form-padded--vis wid101",children:[e.jsxs("form",{id:"formSched",className:"widFull",name:"schedule_form",encType:"application/x-www-form-urlencoded",action:"schedule_form",method:"post",target:"_top",ref:c,children:[e.jsxs("section",{id:"formHSchedSect",className:"mg-3b widMaxFullView ovFlAut-fix flexNoW flexQ900NoWC flexAlItCt cGap2v rGapQ9002v noInvert",children:[e.jsx("h1",{id:"hSched",className:"wsBs bolded",children:e.jsx("strong",{children:"Atendimento Diário"})}),e.jsx("button",{type:"button",className:"btn btn-success widFull900Q widQ460MinFull htMaxBSControl forceInvert bolded",id:"addAppointBtn",onClick:I,title:"Preencha um formulário para gerar a ficha de uma nova consulta",children:"Adicionar Consulta"})]}),e.jsx("small",{role:"textbox",children:e.jsx("em",{className:"wsBs",children:"Insira aqui informações sobre uma nova consulta ou confira a tabela de agendamentos"})}),e.jsx("hr",{}),e.jsxs("section",{id:"formDayBodySchedSect",className:"widMaxFullView",children:[e.jsxs("section",{className:"flexNoW flexJSt flexQ900NoWC rGapQ9002v",children:[e.jsxs("section",{className:"flexJC flexAlItSt flexNoWC flexBasis75 padR5v",children:[e.jsxs("fieldset",{className:"flexJSt flexAlItCt flexBasis75 cGap2v ancestorTwins flexTwin-height widQ900MinFull flexQ460NoWC",id:"schedHourFs",children:[e.jsxs("div",{role:"group",className:"flexLineDiv flexQ900NoWC widQ460MinFull widHalf900Q rGapQ900null",id:"changeDayDiv",children:[e.jsx("label",{className:"boldLabel mg-09t",htmlFor:"changeDaySel",children:"Dia de Inclusão:"}),e.jsx("select",{className:"form-select widMin75Q460v ssPersist",id:"changeDaySel",title:"Selecione aqui o dia para inclusão dentre os encaixados automaticamente na agenda","data-title":"Dia de trabalho para Inclusão"})]}),e.jsxs("div",{role:"group",className:"flexLineDiv flexQ900NoWC widQ460MinFull alSfSt widHalf900Q rGapQ900null",id:"hourDayDiv",children:[e.jsx("label",{className:"boldLabel mg-09t",id:"labHourDay",htmlFor:"hourDayInp",children:"Horário do Dia:"}),e.jsx("input",{type:"time",className:"form-control widMin75Q460v ssPersist",id:"hourDayInp",title:"Selecione aqui o horário na agenda (só funcionará para horários tabelados)","data-title":"Horário de trabalho para Inclusão",onInput:u=>{try{const y=Array.from(document.querySelectorAll(".hour")).map(s=>s instanceof HTMLElement?s.dataset.hour||s.innerText:null).filter(s=>typeof s=="string");y.some(s=>s===u.currentTarget.value)?(u.currentTarget.style.color="rgb(33, 37, 41)",u.currentTarget.style.borderColor="rgb(179, 205, 242)"):(u.currentTarget.style.color="#c10f0fd8",u.currentTarget.style.borderColor="#c10f0fd8",setTimeout(()=>{const s=document.getElementById("hourDayInp");if(s instanceof HTMLInputElement||s instanceof HTMLSelectElement){s.style.borderColor="rgb(179, 205, 242)";const S=y.map(T=>T.slice(0,2));if(S.some(T=>s.value===T)){const T=S.find(j=>s.value===j);T&&T.length===2&&(s.value=`${T}:00`,s.style.color="rgb(33, 37, 41)")}else parseInt(s.value.replace(":",""))>(parseInt(y.at(-1).replace(":",""))||21)?(s.value=`${parseInt(y.at(-1).slice(0,2))}:00`,s.style.color="rgb(33, 37, 41)"):parseInt(s.value.slice(0,2))<(parseInt(y[0].replace(":",""))||18)&&(s.value=`${parseInt(y[0].slice(0,2))}:00`,s.style.color="rgb(33, 37, 41)")}},1e3))}catch(y){console.error(`Error executing ${u.type} callback:
${y.message}`)}},onChange:u=>{try{const y=Array.from(document.querySelectorAll(".hour")).map(s=>s instanceof HTMLElement?s.dataset.hour||s.innerText:null).filter(s=>typeof s=="string");y.some(s=>s===u.currentTarget.value)?(u.currentTarget.style.color="rgb(33, 37, 41)",u.currentTarget.style.borderColor="rgb(179, 205, 242)"):(u.currentTarget.style.color="#c10f0fd8",u.currentTarget.style.borderColor="#c10f0fd8",setTimeout(()=>{const s=document.getElementById("hourDayInp");if(s instanceof HTMLInputElement||s instanceof HTMLSelectElement){s.style.borderColor="rgb(179, 205, 242)";const S=y.map(T=>T.slice(0,2));if(S.some(T=>s.value===T)){const T=S.find(j=>s.value===j);T&&T.length===2&&(s.value=`${T}:00`,s.style.color="rgb(33, 37, 41)")}else parseInt(s.value.replace(":",""))>(parseInt(y.at(-1).replace(":",""))||21)?(s.value=`${parseInt(y.at(-1).slice(0,2))}:00`,s.style.color="rgb(33, 37, 41)"):parseInt(s.value.slice(0,2))<(parseInt(y[0].replace(":",""))||18)&&(s.value=`${parseInt(y[0].slice(0,2))}:00`,s.style.color="rgb(33, 37, 41)")}},1e3))}catch(y){console.error(`Error executing ${u.type} callback:
${y.message}`)}}})]})]}),e.jsx("fieldset",{className:"flexJSt flexAlItCt flexBasis25 cGap2v ancestorTwins flexTwin-height",id:"schedTabFs",children:e.jsxs("div",{role:"group",className:"flexLineDiv flexAlItCt900Q flexQ460NoWC flexAlItSt460Q widQ460MinFull flexTwin-height rGapQ2v",id:"confirmDayMainDiv",children:[e.jsxs("div",{role:"group",className:"flexNoW flexQ460NoWC cGap1v noInvert",children:[e.jsx("label",{className:"boldLabel",id:"labConfirmDay",htmlFor:"confirmDayInp",children:"Consulta Confirmada:"}),e.jsx("div",{role:"group",id:"confirmDaySubDiv",children:e.jsx("input",{type:"checkbox",className:"form-check-input checkGreen mdGreen noInvert invtSignal dkGreen",id:"confirmDayInp",title:"Confirme aqui uma consulta referenciada na Área de transferência","data-title":"Consulta Confirmada",required:!0,onChange:l==="coordenador"||l==="supervisor"?()=>{try{const u=document.getElementById("confirmDayInp"),y=document.querySelector("[id*=appointmentBtn]");if(!(u instanceof HTMLInputElement&&(u.type==="checkbox"||u.type==="radio")))throw g(u,"Validation of confirmRegst instance",h(new Error));if(!(y instanceof HTMLElement)){console.warn(`No related button for day checkbox id ${u.id}`);return}u.checked?(y.classList.remove("btn-info"),y.classList.add("btn-success")):(y.classList.remove("btn-success"),y.classList.add("btn-info"))}catch(u){console.error(`Error:${u.message}`)}}:()=>{}})})]}),e.jsx("div",{role:"group",id:"regstDaySubDiv",className:"hovBlock",children:e.jsx(jr,{rootEl:document.getElementById("regstDaySubDiv"),secondOp:"Arraste"})})]})})]}),e.jsxs("section",{className:"flexJC flexAlItCt flexNoW flexBasis25 form-control transfArea cGap1v noInvert",id:"transfArea",children:[e.jsx("slot",{id:"replaceSlot",className:"opaqueEl ssPersist",title:"Aqui é incluído o botão de uma consulta recém-criada",children:"Área de transferência"}),e.jsx("button",{type:"button",className:"btn btn-close reduced-btn-close",id:"btnEraseTransfApt",title:"Resetar a Área de transferêrncia",onClick:()=>{const u=document.getElementById("transfArea");u instanceof HTMLElement&&(!u.hasChildNodes()||u.innerHTML===""||u.childElementCount===1||!u.querySelector("slot"))&&(u.querySelector('[id*="appointmentBtn"]')?u.replaceChild(Object.assign(document.createElement("slot"),{id:"replaceSlot",textContent:"Área de transferência",className:"opaqueEl",color:"#0981714d",title:"Aqui é incluído o botão de uma consulta recém-criada"}),u.querySelector('[id*="appointmentBtn"]')):(g(u,"Element for appointment transference slot in handleDragAptBtn()",h(new Error)),u.querySelector("slot")||u.appendChild(Object.assign(document.createElement("slot"),{id:"replaceSlot",textContent:"Área de transferência",className:"opaqueEl",color:"#0981714d"}))))}})]})]}),e.jsx("hr",{}),e.jsx("section",{className:"flexLineDiv flexQ460NoWC widQ460MinFull widQ900MinFull flexTwin-height widHalf",id:"workingDefinitionsDiv",ref:d,children:e.jsxs("div",{role:"group",className:"flexAlItCt flexJSe flexAlItSt flexNoWC flexBasis75 widQ900MinFull",children:[e.jsxs("div",{role:"group",className:"flexJBt cGap2v flexQ460NoWC widQ900MinFull flexJtSb900Q",children:[e.jsxs("div",{role:"group",className:"flexJBt cGap1v flexAlItBs flexQ900NoWC widHalf900Q",children:[e.jsx("label",{htmlFor:"firstWorkingDay",className:"bolded",children:"Primeiro dia de Trabalho:"}),e.jsxs("select",{id:"firstWorkingDay",className:"form-select widMin18CImp widFull900Q widMin75Q460v widQ460FullW lcPersist",title:"Selecione aqui o primeiro dia de trabalho na semana ou edite manualmente os rótulos na agenda","data-title":"Primeiro dia de trabalho na semana",onChange:l==="coordenador"?()=>{var u;_.isAutoFillMonthOn&&ne(Array.from(((u=c.current)==null?void 0:u.querySelectorAll(".dayTabRef"))??[]),document.getElementById("monthSelector"),_.isAutoFillMonthOn,!1)}:()=>{},children:[e.jsx("option",{value:"Segunda-feira","data-weekday":"1",children:"Segunda-feira"}),e.jsx("option",{value:"Terça-feira","data-weekday":"2",children:"Terça-feira"}),e.jsx("option",{value:"Quarta-feira","data-weekday":"3",children:"Quarta-feira"}),e.jsx("option",{value:"Quinta-feira","data-weekday":"4",children:"Quinta-feira"}),e.jsx("option",{value:"Sexta-feira","data-weekday":"5",children:"Sexta-feira"}),e.jsx("option",{value:"Sábado","data-weekday":"6",children:"Sábado"}),e.jsx("option",{value:"Domingo","data-weekday":"0",children:"Domingo"})]})]}),e.jsxs("div",{role:"group",className:"flexJBt cGap1v flexAlItBs flexQ900NoWC widHalf900Q",children:[e.jsx("label",{htmlFor:"secondWorkingDay",className:"bolded",children:"Segundo dia de Trabalho:"}),e.jsxs("select",{id:"secondWorkingDay",className:"form-select widMin18CImp wid90-900Q widQ460FullW lcPersist",title:"Selecione aqui o segundo dia de trabalho na semana ou edite manualmente os rótulos na agenda","data-title":"Segundo dia de trabalho na semana",onChange:l==="coordenador"?()=>{var u;_.isAutoFillMonthOn&&ne(Array.from(((u=c.current)==null?void 0:u.querySelectorAll(".dayTabRef"))??[]),document.getElementById("monthSelector"),_.isAutoFillMonthOn,!1)}:()=>{},children:[e.jsx("option",{value:"Segunda-feira","data-weekday":"1",children:"Segunda-feira"}),e.jsx("option",{value:"Terça-feira","data-weekday":"2",children:"Terça-feira"}),e.jsx("option",{value:"Quarta-feira","data-weekday":"3",children:"Quarta-feira"}),e.jsx("option",{value:"Quinta-feira","data-weekday":"4",children:"Quinta-feira"}),e.jsx("option",{value:"Sexta-feira","data-weekday":"5",children:"Sexta-feira"}),e.jsx("option",{value:"Sábado","data-weekday":"6",children:"Sábado"}),e.jsx("option",{value:"Domingo","data-weekday":"0",children:"Domingo"})]})]})]}),e.jsxs("div",{role:"group",className:"flexJBt cGap2v flexAlItBs flexAlE900Q flexQ460NoWC flexAlItSt460Q widFull900Q",children:[e.jsxs("div",{role:"group",className:"flexJBt cGap1v flexQ900NoWC widHalf900Q",children:[e.jsx("label",{className:"boldLabel mg-09t",htmlFor:"monthSelector",children:"Relação de Pacientes do Mês:"}),e.jsxs("select",{className:"form-select widFull900Q widQ460FullW lcPersist",id:"monthSelector",name:"working_month",title:"Selecione aqui o mês de trabalho","data-title":"Mês da tabela de agendamento",ref:p,onChange:()=>{try{const u=p.current||document.getElementById("monthSelector");if(!(u instanceof HTMLSelectElement||u instanceof HTMLInputElement))throw B(u,"Month Selector when handling Month state change",h(new Error));const y=document.getElementById("tbSchedule");if(!(y instanceof HTMLElement))throw g(y,"Table Schedule Root when handling Month state change",h(new Error));if(!(he instanceof Object&&he.hasOwnProperty(u.value)))throw new Error("Error validating sessionScheduleState using the monthSelector value reference");Ie.addedAptListeners=!1,Ie.addedDayListeners=!1,gr(p.current,document.getElementById("tbSchedule"),l,_.isAutoFillMonthOn);try{const s=document.querySelector(".lastConsDayCont");if(!(s instanceof HTMLElement))throw g(s,"Last Table Head Cel",h(new Error));if(getComputedStyle(s).display==="none"||s.hidden===!0){const S=document.getElementById("tbSchedule");if(!(S instanceof HTMLElement))throw g(S,"Table Body",h(new Error));S.querySelectorAll("tr").forEach((T,j)=>{try{const E=Array.from(T.querySelectorAll("td")).map(N=>N).at(-1);if(!(E instanceof HTMLElement))throw g(E,"Last Row Cel",h(new Error));E.style.display="none"}catch(E){console.error(`Error executing iteration ${j} of cicles for checking Last Row Cells:${E.message}`)}})}else{const S=document.getElementById("tbSchedule");if(!(S instanceof HTMLElement))throw g(S,"Table Body",h(new Error));S.querySelectorAll("tr").forEach((T,j)=>{try{const E=Array.from(T.querySelectorAll("td")).map(N=>N).at(-1);if(!(E instanceof HTMLElement))throw g(E,"Last Row Cel",h(new Error));E.style.display="table-cell"}catch(E){console.error(`Error executing iteration ${j} of cicles for checking Last Row Cells:${E.message}`)}})}}catch(s){console.error(`Error executing procedure for checking Last Schedule Column display:
${s.message}`)}}catch(u){console.error(`Error handling change on Month Selector:
                            ${u.message}`)}},children:[e.jsx("option",{value:"jan",children:"Janeiro"}),e.jsx("option",{value:"feb",children:"Fevereiro"}),e.jsx("option",{value:"mar",children:"Março"}),e.jsx("option",{value:"apr",children:"Abril"}),e.jsx("option",{value:"may",children:"Maio"}),e.jsx("option",{value:"jun",children:"Junho"}),e.jsx("option",{value:"jul",children:"Julho"}),e.jsx("option",{value:"aug",children:"Agosto"}),e.jsx("option",{value:"sep",children:"Setembro"}),e.jsx("option",{value:"oct",children:"Outubro"}),e.jsx("option",{value:"nov",children:"Novembro"}),e.jsx("option",{value:"dec",children:"Dezembro"})]})]}),e.jsxs("div",{role:"group",className:"form-check form-switch flexAlE900Q widHalf900Q mgT1vh900Q mgB1v900Q",children:[e.jsx("input",{className:"form-check-input mgB1v900Q invtSignal dkBlue",type:"checkbox",role:"switch",title:"Desative ou ative aqui o cálculo automático de datas e títulos","data-title":"Auto-ajuste de mês",id:"toggleAutofillMonth",onChange:()=>{var u;_.isAutoFillMonthOn=!_.isAutoFillMonthOn,_.isAutoFillMonthOn&&ne(Array.from(((u=c.current)==null?void 0:u.querySelectorAll(".dayTabRef"))??[]),document.getElementById("monthSelector"),_.isAutoFillMonthOn,!1)}}),e.jsx("label",{className:"form-check-label bolded",htmlFor:"toggleAutofillMonth",children:"Auto-ajuste de mês"})]})]})]})})]}),e.jsx("hr",{className:"rdc02rHr460Q"}),e.jsx("section",{id:"formBodySchedSect",className:"widMaxFullView ovFlAut",children:e.jsxs("table",{className:"table table-responsive table-striped table-hover form-padded table-transparent",id:"mainConsDaysCont",children:[e.jsx("colgroup",{children:a.map(u=>e.jsx("col",{id:`schedule-col-${u}`,"data-col":u},`schedule_col__${u}`))}),e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:e.jsx("div",{role:"group",className:"flexAlItCt mg-40b noInvert",children:e.jsx("strong",{children:"Horário"})})}),a.map((u,y,s)=>u===s.slice(-1)[0]?e.jsx(Ae,{nCol:u,last:!0},`th_date__${u}`):e.jsx(Ae,{nCol:u},`th_date__${u}`))]})}),e.jsx("tbody",{id:"tbSchedule",children:t.map((u,y)=>e.jsx(vr,{mainRoot:r,nHr:u,nRow:y+1},`tr_${y+1}__${u}`))})]})}),e.jsx("hr",{}),e.jsxs("div",{role:"group",className:"flexNoW flexQ460NoWC cGap1v rGapQ4601v widThird widFull900Q",children:[e.jsx("button",{type:"button",id:"btnExport",className:"btn btn-success flexAlItCt flexJC flexBasis50 bolded noInvert",name:"btnExportSched",ref:v,"data-active":"false",title:"Gere um .xlsx com os dados preenchidos",onClick:u=>{var y;new Re().handleExportClick(u,`Agenda__d${new Date().getDay()}_m${new Date().getMonth()+1}_y${new Date().getFullYear()}`,c.current??document,Array.from(((y=c.current)==null?void 0:y.querySelectorAll("table"))??[]).at(-1)??Array.from(document.querySelectorAll("table")??[]).at(-1)??"TabelaDeAgenda"),new AbortController().signal},children:"Gerar Planilha"}),e.jsx(Er,{root:f.mainRoot,renderForm:e.jsx(Pe,{mainRoot:r,context:!1})})]}),e.jsx("div",{role:"group",id:"pacDiv",children:e.jsx("hr",{})})]}),e.jsx("footer",{className:"d-no",id:"scheduleFooter"}),e.jsx("div",{children:w?e.jsx(Ir,{onClose:I}):e.jsx(e.Fragment,{})})]})})}export{Pe as default};
