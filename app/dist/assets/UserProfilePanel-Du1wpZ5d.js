import{r as s,v as C,e as S,a as E,j as e,i as A,T as L,M as P,E as R,G as k,V as y,W as M,z as F,U,L as O,d as T}from"./index-C1Kn7LbF.js";function V({setContact:l,shouldDisplayContact:n=!0}){const a=s.useRef(null),h=s.useRef(null);return s.useEffect(()=>{a.current instanceof HTMLDialogElement?(a.current.showModal(),C([...a.current.querySelectorAll("*"),a.current])):S(a.current,"Dialog for contact request",E(new Error))},[a]),e.jsx(e.Fragment,{children:n&&e.jsxs("dialog",{ref:a,className:"modal-content-fit flexAlItCt flexNoWC",id:"contactDlg",onClick:t=>{var c;A(t,t.currentTarget).some(u=>u===!0)&&(l(!n),(c=t.currentTarget.closest("dialog"))==null||c.close())},children:[e.jsxs("div",{className:"flexNoW cGap2v widFull mg-3b",children:[e.jsx("h3",{className:"bolded",children:"Formulário de Contato"}),e.jsx("button",{className:"btn btn-close",onClick:()=>{var t;l(!n),a.current instanceof HTMLDialogElement&&((t=a.current)==null||t.close())}})]}),e.jsxs("div",{className:"flexNoWC widFull mg-2bv",children:[e.jsx("label",{className:"bolded",htmlFor:"contactOps",children:"Razão de contato"}),e.jsxs("select",{id:"contactOps",className:"form-select",children:[e.jsx("option",{value:"problema",children:"Problemas na Aplicação"}),e.jsx("option",{value:"duvida",children:"Dúvidas sobre o Sistema"}),e.jsx("option",{value:"outro",children:"Outros"})]})]}),e.jsxs("div",{className:"flexNoWC widFull mg-2bv",children:[e.jsx("label",{className:"bolded",htmlFor:"contactObs",children:"Detalhes"}),e.jsx("textarea",{id:"contactObs",className:"form-control minText",minLength:2})]}),e.jsx("button",{type:"button",id:"submitContactBtn",className:"btn btn-info widHalf bolded mg-1t",ref:h,onClick:t=>{L(t,t.currentTarget.closest("dialog")).then(c=>c[0]&&l(!n))},children:"Enviar"})]})})}function z({setPropDlg:l,shouldDisplayPropDlg:n=!0}){const a=s.useRef(null),h=s.useRef(null),t=s.useRef(null),c=s.useRef(null),[,u]=s.useState("userName"),m=r=>{if(t.current||(t.current=document.getElementById("userPropsNewValue")),c.current instanceof HTMLSelectElement&&(t.current instanceof HTMLInputElement||t.current instanceof HTMLSelectElement)){u(r),t.current.value="";const o=(i="text",f=!0,g=!0)=>{const d=document.createElement("input");return d.classList.add("form-control"),Object.assign(d,{id:"userPropsNewValue",type:i}),f&&(d.placeholder="Insira aqui o novo valor"),g&&(d.classList.add("minText"),d.minLength=2),t.current.parentElement.replaceChild(d,t.current),t.current=d,d},x=()=>{const i=document.createElement("select");return i.classList.add("form-select"),i.id="userPropsNewValue",i.style.maxWidth=getComputedStyle(t.current).width,t.current.parentElement.replaceChild(i,t.current),t.current=i,i};switch(c.current.value){case"userName":const i=o();i.autocomplete="given-name",i.autocapitalize="true",i.addEventListener("input",()=>{P(i)});break;case"userClass":const f=x(),g=document.createElement("option");g.value="coord",g.textContent="Coordenador";const d=document.createElement("option");d.value="profExt",d.textContent="Membro Externo";const v=document.createElement("option");v.value="profInt",v.textContent="Membro Interno";const b=document.createElement("option");b.value="stud",b.textContent="Extensionista / Estudante",f.appendChild(g),f.appendChild(d),f.appendChild(v),f.appendChild(b);break;case"userArea":const j=x(),N=document.createElement("option");N.value="edFis",N.textContent="Educação Física";const p=document.createElement("option");p.value="nutr",p.textContent="Nutrição";const I=document.createElement("option");I.value="odonto",I.textContent="Odontologia",j.appendChild(N),j.appendChild(p),j.appendChild(I);break;case"userEmail":const w=o("email");w.autocomplete="email",w.addEventListener("input",()=>{M(w)}),w.addEventListener("click",()=>{M(w)});break;case"userTel":const D=o("tel");D.autocomplete="tel",D.addEventListener("input",()=>{y(D)});break;default:o()}}F(E(new Error),"Entry elements for changing type of user property input",c.current,t.current)};return s.useEffect(()=>{if(a.current instanceof HTMLDialogElement){a.current.showModal(),C([...a.current.querySelectorAll("*"),a.current]);const r=document.getElementById("userPropsNewValue");r==null||r.addEventListener("input",()=>{P(r)})}else S(a.current,"Dialog for userProps request",E(new Error))},[a]),s.useEffect(()=>{},[t,a]),e.jsx(R,{FallbackComponent:()=>e.jsx(k,{message:"Erro carregando modal de alteração de dados de usuário!"}),children:n&&e.jsxs("dialog",{ref:a,className:"modal-content-fit flexAlItCt flexNoWC",id:"alterUsePropDlg",onClick:r=>{var o;A(r,r.currentTarget).some(x=>x===!0)&&(l(!n),(o=r.currentTarget.closest("dialog"))==null||o.close())},children:[e.jsxs("section",{className:"flexNoW cGap2v widFull mg-3b",children:[e.jsx("h3",{className:"bolded",children:"Formulário de Alteração"}),e.jsx("button",{className:"btn btn-close",onClick:()=>{var r;l(!n),a.current instanceof HTMLDialogElement&&((r=a.current)==null||r.close())}})]}),e.jsxs("fieldset",{className:"flexNoWC widFull mg-2bv",children:[e.jsx("label",{className:"bolded",htmlFor:"userPropsOps",children:"Opções de Alteração:"}),e.jsxs("select",{id:"userPropsOps",className:"form-select",onChange:()=>m(t.current.value),ref:c,children:[e.jsx("option",{value:"userName",children:"Nome"}),e.jsx("option",{value:"userClass",children:"Classe"}),e.jsx("option",{value:"userArea",children:"Área"}),e.jsx("option",{value:"userEmail",children:"E-mail"}),e.jsx("option",{value:"userTel",children:"Telefone"})]})]}),e.jsxs("fieldset",{className:"flexNoWC widFull mg-2bv",children:[e.jsx("label",{className:"bolded",htmlFor:"userPropsNewValue",children:"Novo valor:"}),e.jsx("input",{type:"text",id:"userPropsNewValue",className:"form-control minText",placeholder:"Insira aqui o novo valor",autoComplete:"given-name",autoCapitalize:"true",minLength:2,ref:t})]}),e.jsxs("fieldset",{className:"flexNoWC widFull mg-2bv",children:[e.jsx("label",{className:"bolded",htmlFor:"userPropJust",children:"Razão:"}),e.jsx("input",{type:"text",id:"userPropJust",className:"form-control minText",minLength:2,placeholder:"Insira aqui a justificativa"})]}),e.jsx("button",{type:"button",id:"submitNewPropBtn",className:"btn btn-info widHalf bolded mg-1t",ref:h,onClick:r=>{L(r,r.currentTarget.closest("dialog")).then(o=>o[0]&&l(!n))},children:"Enviar"})]})})}function H({user:l}){const n=s.useRef(null),[a,h]=s.useState(!1),t=()=>h(!a),[c,u]=s.useState(!1),m=()=>u(!c),[r,o]=s.useState(!1),[,x]=s.useState(l),[i,f]=s.useState(l.loadedData.privilege),[g,d]=s.useState(l.loadedData.area),[v,b]=s.useState(l.loadedData.email),[j,N]=s.useState(l.loadedData.telephone);return s.useEffect(()=>{if(n.current instanceof HTMLElement){C([...n.current.querySelectorAll("*"),n.current]);const p=Object.freeze(new U({name:l.loadedData.name,privilege:l.loadedData.privilege,area:l.loadedData.area,email:l.loadedData.email,telephone:l.loadedData.telephone}));console.log("USER CARREGADO"),console.log(p),x(p),f(`${p.userClass.slice(0,1).toUpperCase()}${p.userClass.slice(1)}`),d(`${p.userArea.slice(0,1).toUpperCase()}${p.userArea.slice(1)}`),b(p.userEmail),N(p.userTel)}else S(n.current,"Popover for user panel",E(new Error))},[n]),e.jsxs("div",{className:"po posAb lowPo userPo",ref:n,children:[e.jsxs("div",{className:"hPo noInvert",children:[e.jsx("div",{id:"logoutDiv",className:"flexJSt cGap1v mg-05b noInvert",children:e.jsx("button",{type:"button",className:"transparent-el-bg noInvert",id:"contactBtn",onClick:()=>{o(!r)},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-window-stack htMax0-1r",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M4.5 6a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M6 6a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1m2-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"}),e.jsx("path",{d:"M12 1a2 2 0 0 1 2 2 2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zM2 12V5a2 2 0 0 1 2-2h9a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1m1-4v5a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V8zm12-1V5a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v2z"})]})})}),e.jsx("h3",{className:"hPo noInvert d-ibl brd-nulled brd-b-no pd-no pd0",children:"Informações de Usuário"})]}),e.jsxs("div",{className:"bdPo noInvert",children:[e.jsxs("dl",{className:"mg-0b",children:[e.jsx("dt",{children:"Classe:"}),e.jsx("dd",{id:"classLogin","data-title":"Classe de Usuário ativo",children:i}),e.jsx("dt",{children:"Área:"}),e.jsx("dd",{children:g}),e.jsx("dt",{children:"E-mail:"}),e.jsx("dd",{children:v}),e.jsx("dt",{children:"Telefone:"}),e.jsx("dd",{children:j})]}),e.jsxs("div",{id:"alterUserPropDiv",className:"flexJSt cGap1v mg-1-3b",children:[e.jsx("span",{className:"bolded mg-04t",children:"Alteração"}),e.jsx("button",{type:"button",className:"transparent-el-bg",id:"alterUserPropBtn",onClick:m,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-gear widMax-5r htMax0-3r",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"}),e.jsx("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"})]})}),c&&e.jsx(z,{setPropDlg:u,shouldDisplayPropDlg:c})]}),e.jsxs("div",{id:"logoutDiv",className:"flexJSt cGap1v noInvert",children:[e.jsx("span",{className:"bolded mg-04t noInvert",children:"Logout"}),e.jsxs("button",{type:"button",className:"transparent-el-bg noInvert",id:"logoutBtn",style:{position:"relative"},children:[e.jsx("a",{id:"logoutAnchor",target:"_self",rel:"nofollow",style:{zIndex:"10",position:"absolute",color:"transparent"},href:"#",children:e.jsx(O,{to:"/login",children:"LOGIN"})}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-door-open widMax-5r",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"}),e.jsx("path",{d:"M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117M11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z"})]})]})]}),e.jsxs("div",{id:"logoutDiv",className:"flexJSt cGap1v mg-1t noInvert",children:[e.jsx("span",{className:"bolded noInvert",children:"Contato"}),e.jsx("button",{type:"button",className:"transparent-el-bg noInvert",id:"contactBtn",onClick:t,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-info-circle htMax0-1r",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),e.jsx("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})]})})]})]}),a&&e.jsx(V,{setContact:h,shouldDisplayContact:a})]})}function W(){const l=s.useRef(null),[n,a]=s.useState(!1),[h,t]=s.useState("Geral"),[c,u]=s.useState("../img/PROS_icon.png"),[m,r]=s.useState(T);return s.useEffect(()=>{r(localStorage.getItem("activeUser")?JSON.parse(localStorage.getItem("activeUser")):T.loadedData)},[]),s.useEffect(()=>{if(l.current instanceof HTMLElement){C([...l.current.querySelectorAll("*"),l.current]);const o=Object.freeze(new U({name:m.loadedData.name,privilege:m.loadedData.privilege,area:m.loadedData.area,email:m.loadedData.email,telephone:m.loadedData.telephone})),x=/psi/gi.test(o.userArea)?"psi":o.userArea;switch(t(m.loadedData.name),x){case"odontologia":u("../img/pros-od-icon.png");break;case"educação física":u("../img/pros_edfis_icon.png");break;case"nutrição":u("../img/pros_nut_icon.png");break;case"psi":u("../img/icon-psy.png");break;default:u("../img/PROS_icon.png")}}else S(l.current,"JSX for user panel",E(new Error))},[m]),e.jsxs("span",{className:"posRl flexNoW flexNoW900Q cGap0-5v rGap1v900Q contFitW noInvert",ref:l,children:[e.jsx("output",{id:"nameLogin","data-title":"Usuário ativo",children:h}),e.jsx("span",{id:"contProfileImg",className:"profileIcon",children:e.jsx("img",{src:c,className:"profileIcon mg-03rb",id:"profileIconImg","data-container":"body","data-toggle":"popover",title:"Informações de Usuário","data-placement":"bottom",onClick:()=>a(!n),onError:o=>{o.currentTarget.src.includes("..assets")&&(o.currentTarget.src=o.currentTarget.src.replace("..assets","assets"))},alt:"User img"})}),n&&e.jsx(H,{user:m,setDropdown:a,shouldShowDropdown:n})]})}export{W as U};
