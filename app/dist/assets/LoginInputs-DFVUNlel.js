import{l as E,a as m,e as L,O as y,a6 as b,a7 as j,r as d,a8 as C,a9 as S,z as A,aa as B,y as N,j as n,ab as H,ac as k,ad as F,S as z}from"./index-C1Kn7LbF.js";function P(e){if(e instanceof HTMLElement){const r=e.querySelector(".bi"),i=document.getElementById("pw");i instanceof HTMLInputElement?r!=null&&r.classList.contains("bi-eye-fill")?(i.type="text",e.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
          <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7 7 0 0 0 2.79-.588M5.21 3.088A7 7 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474z"/>
          <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
        </svg>
        `):r!=null&&r.classList.contains("bi-eye-slash-fill")?(i.type="password",e.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
          <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
          <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
        </svg>
        `):console.error("innerIcon class not validated"):E(i,"pwInp in callbackShowPw()",m(new Error))}else L(e,"spanShowPw in callbackShowPw()",m(new Error))}const g={attempts:0,timeAcc:0};function T(){try{if(g.attempts+=1,g.attempts>0){if(g.timeAcc+=new Date().getTime(),g.attempts>4){const t=document.getElementById("submitBtn")||document.querySelector('a[href*="/base"]');(t instanceof HTMLButtonElement||t instanceof HTMLInputElement)&&(t.disabled=!0),alert("Tentativas excedidas para o intervalo de tempo. Aguarde para tentat novamente."),setTimeout(()=>{const s=document.getElementById("submitBtn")||document.querySelector('a[href*="/base"]');(s instanceof HTMLButtonElement||s instanceof HTMLInputElement)&&(s.disabled=!1)},3e3)}setTimeout(()=>{g.attempts=0},1e4)}const e=document.getElementById("pw"),r=document.getElementById("user");if(!(r instanceof HTMLInputElement))throw E(r,"userInp in callbackSubmitBtn()",m(new Error));if(!(e instanceof HTMLInputElement))throw E(e,"pwInp in callbackSubmitBtn()",m(new Error));if(r.value.length<5||r.value.length>30||/\s/g.test(r.value)||!r.checkValidity()){r.placeholder="Usuário inválido",y(r);let t="";r.value.length<5&&(t+=`O usuário deve ter ao mínimo 5 caracteres!
`),r.value.length>30&&(t+=`O usuário deve ter no máximo 30 caracteres!
`),/\s/g.test(r.value)&&(t+=`O usuário não pode ter espaços!
`);const s=r.validity;return(s.badInput||s.typeMismatch)&&(t+=`Tipo de entrada indevida
`),s.patternMismatch&&(t+=`Padrão solicitado não cumprido
`),(s.tooShort||s.valueMissing)&&(t+=`Entrada com falta de caracteres
`),s.tooLong&&(t+=`Entrada com excesso de caracteres
`),r.setCustomValidity(t),b(r.id??"",t),console.warn(t),setTimeout(()=>r.placeholder="Nome de Usuário",5e3),!1}j(e),y(e.parentElement);const i=e.value;if(i.length<8||i.length>30||!/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[^a-zA-Z0-9])(?=.{8,})(?:(?!.*\s).)*(?!.*(.).*\1{4,}).*$/.test(i)||!e.checkValidity()){e.placeholder="Senha inválida";let t="";setTimeout(()=>{e.placeholder="Senha"},5e3),i.length<8&&(t+=`A senha deve conter ao menos 8 caracteres
`),i.length>30&&(t+=`A senha deve conter no máximo 8 caracteres
`),/\s/.test(i)&&(t+=`Espaços em branco não permitidos
`),/[a-zA-Z]/.test(i)?(/[A-Z]/g.test(i)||(t+=`A senha deve ter ao menos um caractere maiúsculo
`),/[a-z]/g.test(i)||(t+=`A senha deve ter ao menos um caractere minúsculo
`)):t+=`A senha deve conter pelo menos um caractere alfabético
`,/[0-9]/g.test(i)||(t+=`A senha deve conter pelo menos um número
`),/[^a-zA-Z0-9]/.test(i)||(t+="A senha deve conter ao menos um caractere especial ou simbólico.");const s=e.validity;return(s.badInput||s.typeMismatch)&&(t+=`Tipo de entrada indevida
`),s.patternMismatch&&(t+=`Padrão solicitado não cumprido
`),(s.tooShort||s.valueMissing)&&(t+=`Entrada com falta de caracteres
`),s.tooLong&&(r.placeholder+=`Entrada com excesso de caracteres
`),e.setCustomValidity(t),b(e.id??"",t),console.warn(t),!1}return!0}catch(e){return console.error(`Error executing callbackSubmitBtn:
${e.message}`),!1}}function W(){const e=d.useRef(null),r=d.useRef(null),i=d.useRef(null),[t,s]=d.useState(""),M=C(),I=a=>{try{if(!(r.current instanceof HTMLFormElement))throw new Error("Failed to validate form instance");if(!(a instanceof HTMLElement))throw new Error("Failed to validate span reference");const l=document.getElementById("userWarn"),c=document.getElementById("pwWarn");l instanceof HTMLElement&&(l.style.display="none"),c instanceof HTMLElement&&(c.style.display="none"),(()=>{s(n.jsx(z,{fs:!0}));const u=r.current??a.closest("form");u instanceof HTMLElement&&(u.style.opacity="0.3",u.style.filter="grayscale(40%)")})(),navigator.language.startsWith("pt-")?alert("Esta é apenas uma versão de teste estático do sistema. O login irá prosseguir independente da validez do formulário."):alert("This is a client only, static, test execution. The login will be forwarded regardless of the form validity."),setTimeout(()=>{var w,o,p,f,h;const u=parseFloat(((p=(o=(w=document.getAnimations().find(x=>x.animationName==="spinner-border"))==null?void 0:w.timeline)==null?void 0:o.currentTime)==null?void 0:p.toString())??"")-parseFloat(((h=(f=document.getAnimations().find(x=>x.animationName==="spinner-border"))==null?void 0:f.startTime)==null?void 0:h.toString())??"");setTimeout(()=>M("/base"),Number.isFinite(u)?u:2e3)},1200)}catch(l){console.error(`Error executing exeLogin:
${l.message}`)}};return d.useEffect(()=>{try{if(!(e.current instanceof HTMLAnchorElement))throw L(e.current,"Anchor Reference in Login Page",m(new Error));/undefined/gi.test(e.current.href)&&!/http:/gi.test(e.current.href)&&(e.current.href=e.current.href.replace("undefined",`${location.href.replace(location.pathname,"")}`))}catch(c){console.error(`Error executing procedure for adjusting anchor href:
${c.message}`)}const a=r.current??document.querySelector("form"),l=Array.from(document.querySelectorAll("input"));a instanceof HTMLFormElement&&l.length>0?S(a,l):A(m(new Error),"argument for clearDefInvalidMsg in DOM initialization",a,...l),B(l,{user:"Nome de Usuário",pw:"Senha"})},[]),d.useEffect(()=>N(r.current??document.querySelector("form"))),d.useEffect(()=>{const a=l=>{try{if(!e.current)throw new Error("Failed to validate Submit Reference");l.code==="Enter"&&(e.current.focus(),setTimeout(()=>{e.current&&e.current.click()},200))}catch(c){console.error(`Error executing handleEnter:
${c.message}`)}};e.current&&addEventListener("keyup",a)},[e]),n.jsx("form",{ref:r,id:"outerLoginCont",name:"login_form",action:"check_user_validity",encType:"application/x-www-form-urlencoded",method:"post",target:"_self",autoComplete:"on",children:n.jsxs("div",{role:"group",id:"loginCont",children:[n.jsx("section",{id:"logoCont",children:n.jsx("img",{className:"fade-in-element",id:"logo",src:"/img/PROS_Saude_Modelo1-Final.png",alt:"logo"})}),n.jsxs("section",{id:"headerCont",children:[n.jsx("div",{role:"group",id:"titleCont1",children:n.jsx("h1",{id:"titleText",children:n.jsx("span",{role:"group",className:"fade-in-element",id:"spanTitle",children:"Faça o Login"})})}),n.jsx("div",{role:"group",id:"titleCont2",children:n.jsx("h2",{id:"subtitleText",children:n.jsx("span",{role:"group",className:"fade-in-late-element",id:"spanSubtitle",children:"Informe seus dados de usuário"})})})]}),n.jsxs("section",{id:"inputCont",children:[n.jsx("div",{role:"group",className:"loginInputCont1",children:n.jsx("div",{role:"group",id:"loginInputCont2",children:n.jsx("input",{className:"form-control fade-in-element userInput",id:"user",name:"user_name",type:"text","aria-label":"email ou usuário",placeholder:"Nome de Usuário",title:`Por favor, preencha este\r
			      campo.`,minLength:5,maxLength:30,"data-title":"Usuário",autoComplete:"username",required:!0,autoFocus:!0,onInput:a=>localStorage.setItem("user",btoa(a.currentTarget.value))})})}),n.jsx("small",{className:"customValidityWarn",id:"userWarn",role:"textbox"}),n.jsx("div",{role:"group",className:"loginInputCont1",children:n.jsx("div",{role:"group",className:"loginInputCont2",children:n.jsxs("fieldset",{className:"form-control flexDiv fade-in-element",id:"loginInputCont3",children:[n.jsx("input",{className:"fade-in-element form-control userInput",id:"pw",name:"pw",type:"password",autoComplete:"password","aria-label":"senha",placeholder:"Senha",pattern:"^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[^a-zA-Z0-9])(?=.{8,})(?:(?!.*\\s).)*(?!.*(.).*\\1{4,}).*$",minLength:8,maxLength:30,required:!0,onInput:a=>localStorage.setItem("pw",btoa(a.currentTarget.value))}),n.jsx("button",{type:"button",id:"spanShowPw",className:"halfL fade-in-late-element",onClick:a=>P(a.currentTarget),children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-eye-fill",viewBox:"0 0 16 16",children:[n.jsx("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"}),n.jsx("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"})]})})]})})}),n.jsx("small",{className:"customValidityWarn",id:"pwWarn",role:"textbox",ref:i,children:t}),n.jsxs("nav",{id:"loginBtnCont",children:[n.jsx("a",{id:"recover",className:"fade-in-late-element",href:"/recover",rel:"nofollow noreferrer",target:"_self",children:"Esqueci minha senha"}),n.jsx("button",{type:"submit",className:"btn btn-primary fade-in-element",id:"submitBtn",onClick:a=>{a.preventDefault(),a.currentTarget.firstElementChild instanceof HTMLAnchorElement&&(a.currentTarget.firstElementChild.focus(),a.currentTarget.firstElementChild.click())},children:n.jsx("a",{href:`${H.path}/base`,ref:e,id:"submitLogin",rel:"nofollow noreferrer",target:"_self",style:{color:"#ffff"},onClick:a=>{a.preventDefault();const l=new FormData;let c="";try{const o=document.getElementById("user");if(!(o instanceof HTMLInputElement))throw E(o,"Validation of User name element",m(new Error));c=o.value}catch(o){console.error(`Error executing fetch of user name from element:
${o.message}`)}l.append("u",c);let v="";try{const o=document.getElementById("pw");if(!(o instanceof HTMLInputElement))throw E(o,"Validation of password element instance",m(new Error));v=o.value}catch(o){console.error(`Error reading password value:${o.message}`)}l.append("p",v);const[u,w]=new k().evaluateClickMovements(a);if(w||!T){alert(u);const o=a.currentTarget.parentElement;let p="";(o instanceof HTMLButtonElement||o instanceof HTMLInputElement)&&(o.disabled=!0,p=o.id),setTimeout(()=>{var h;const f=((h=a.currentTarget)==null?void 0:h.parentElement)||document.getElementById(p);(f instanceof HTMLButtonElement||f instanceof HTMLInputElement)&&(f.disabled=!1)},3e3);return}T(),setTimeout(()=>{F(a,l,!0).then(o=>{o.valid?I(i.current):s(o.message),setTimeout(()=>{s("")},1e4)})},300)},children:"Avançar"})})]})]})]})})}export{W as default};
